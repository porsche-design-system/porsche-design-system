{"version":3,"sources":["webpack:///./src/pages/developing/angular/testing.md","webpack:///./src/pages/developing/angular/testing.md?1bcc"],"names":["render","_vm","this","_c","_self","staticClass","_v","_m","attrs","staticRenderFns","script","component"],"mappings":"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","file":"js/chunk-2d0cc818.3539f26d.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"vmark\"},[_c('h1',[_vm._v(\"Angular\")]),_c('TableOfContents'),_c('h2',[_vm._v(\"Testing with Jest\")]),_vm._m(0),_vm._m(1),_vm._m(2),_c('Notification',{attrs:{\"heading\":\"Attention\",\"heading-tag\":\"h2\",\"state\":\"warning\"}},[_vm._v(\" The \"),_c('code',[_vm._v(\"Modal\")]),_vm._v(\" and \"),_c('code',[_vm._v(\"Flyout\")]),_vm._v(\" components use the \"),_c('strong',[_vm._v(\"Dialog API\")]),_vm._v(\", which isn't currently supported by jsdom (\"),_c('a',{attrs:{\"href\":\"https://github.com/jsdom/jsdom/issues/3294\",\"target\":\"_blank\"}},[_vm._v(\"see issue\")]),_vm._v(\"). Since we cannot easily provide a polyfill for this, they have to be mocked or polyfilled manually. Either by using the available polyfill package \"),_c('a',{attrs:{\"href\":\"https://npmjs.com/package/dialog-polyfill\",\"target\":\"_blank\"}},[_vm._v(\"https://npmjs.com/package/dialog-polyfill\")]),_vm._v(\" or by mocking the API. \")]),_c('h3',[_vm._v(\"Setup file\")]),_vm._m(3),_c('h3',[_vm._v(\"Example component\")]),_vm._m(4),_c('h3',[_vm._v(\"Test example component\")]),_vm._m(5),_vm._m(6),_c('h2',[_vm._v(\"Testing with Karma\")]),_c('h3',[_vm._v(\"Config\")]),_vm._m(7),_vm._m(8),_vm._m(9),_vm._m(10),_vm._m(11)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('strong',[_vm._v(\"Jest\")]),_vm._v(\" uses \"),_c('strong',[_vm._v(\"jsdom\")]),_vm._v(\" and supports ShadowDOM since Version 12.2.0.\"),_c('br'),_vm._v(\" However, it doesn't support JavaScript modules as described in this \"),_c('a',{attrs:{\"href\":\"https://github.com/jsdom/jsdom/issues/2475\"}},[_vm._v(\"issue\")]),_vm._v(\".\"),_c('br'),_vm._v(\" Also, it doesn't support \"),_c('code',[_vm._v(\"CSSStyleSheet.replace()\")]),_vm._v(\", \"),_c('code',[_vm._v(\"Intersection Observer\")]),_vm._v(\", \"),_c('code',[_vm._v(\"Element.prototype.scrollTo\")]),_vm._v(\" and others.\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"As a workaround we provide a polyfill as part of the \"),_c('code',[_vm._v(\"@porsche-design-system/components-angular\")]),_vm._v(\" package.\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"To apply the polyfill, simply import it in your \"),_c('strong',[_vm._v(\"setupTest.{js|ts}\")]),_vm._v(\" file.\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('pre',[_c('code',{staticClass:\"language-tsx\"},[_vm._v(\"// setupTest.{js|ts}\\n\\nimport '@porsche-design-system/components-angular/jsdom-polyfill';\\n\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('pre',[_c('code',{staticClass:\"language-tsx\"},[_vm._v(\"// single-component.ts\\n\\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\\nimport type { TabsBarUpdateEventDetail } from '@porsche-design-system/components-angular';\\n\\n@Component({\\n  selector: 'single-component',\\n  template: `\\n    <p-tabs-bar [activeTabIndex]=\\\"tabIndex\\\" (update)=\\\"onUpdate($event)\\\">\\n      <button data-testid=\\\"button1\\\" type=\\\"button\\\">Tab One</button>\\n      <button data-testid=\\\"button2\\\" type=\\\"button\\\">Tab Two</button>\\n      <button data-testid=\\\"button3\\\" type=\\\"button\\\">Tab Three</button>\\n    </p-tabs-bar>\\n    <div data-testid=\\\"debug\\\">Active Tab: { tabIndex + 1 }</div>\\n  `,\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n})\\nexport class SingleComponent {\\n  tabIndex: number = 0;\\n\\n  onUpdate(e: CustomEvent<TabsBarUpdateEventDetail>) {\\n    this.tabIndex = e.detail.activeTabIndex;\\n  }\\n}\\n\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('pre',[_c('code',{staticClass:\"language-tsx\"},[_vm._v(\"// single-component.test.ts\\n\\nimport { componentsReady } from '@porsche-design-system/components-angular';\\nimport { render } from '@testing-library/angular';\\nimport userEvent from '@testing-library/user-event';\\nimport '@porsche-design-system/components-angular/jsdom-polyfill';\\n\\nit('should render Tabs Bar from Porsche Design System and use its events', async () => {\\n  const { getByTestId } = await render(SingleComponent);\\n  await componentsReady();\\n\\n  const debug = getByTestId('debug');\\n  const button1 = getByTestId('button1');\\n  const button2 = getByTestId('button2');\\n  const button3 = getByTestId('button3');\\n\\n  expect(debug.innerHTML).toBe('Active Tab: 1');\\n\\n  await userEvent.click(button2);\\n  expect(debug.innerHTML).toBe('Active Tab: 2');\\n\\n  await userEvent.click(button3);\\n  expect(debug.innerHTML).toBe('Active Tab: 3');\\n\\n  await userEvent.click(button1);\\n  expect(debug.innerHTML).toBe('Active Tab: 1');\\n});\\n\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"More test examples can be found at the \"),_c('a',{attrs:{\"href\":\"developing/components-ready#testing\"}},[_vm._v(\"componentsReady() documentation\")]),_vm._v(\".\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"Since the \"),_c('a',{attrs:{\"href\":\"partials/initial-styles\"}},[_vm._v(\"getInitialStyles()\")]),_vm._v(\" partial is mandatory for using Porsche Design System, the partial needs to be included within test environments. With help of \"),_c('code',[_vm._v(\"@angular-builders/custom-webpack\")]),_vm._v(\" and its \"),_c('code',[_vm._v(\"indexTransform\")]),_vm._v(\" option, the partial can be injected into the \"),_c('code',[_vm._v(\"index.html\")]),_vm._v(\". See \"),_c('a',{attrs:{\"href\":\"partials/initial-styles\"}},[_vm._v(\"getInitialStyles()\")]),_vm._v(\" for a manual how to integrate the partial within \"),_c('code',[_vm._v(\"build\")]),_vm._v(\" and \"),_c('code',[_vm._v(\"serve\")]),_vm._v(\" environment.\"),_c('br'),_vm._v(\" Since Karma does not use the \"),_c('code',[_vm._v(\"index.html\")]),_vm._v(\", but instead relies on \"),_c('code',[_vm._v(\"karma-context.html\")]),_vm._v(\" the transformation of \"),_c('code',[_vm._v(\"index.html\")]),_vm._v(\" is not applicable for testing with \"),_c('code',[_vm._v(\"Karma\")]),_vm._v(\".\"),_c('br'),_vm._v(\" There are different approaches to inject the partial into \"),_c('code',[_vm._v(\"karma-context.html\")]),_vm._v(\":\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_c('code',[_vm._v(\"karma.conf.js\")]),_vm._v(\" option \"),_c('a',{attrs:{\"href\":\"https://karma-runner.github.io/6.4/config/configuration-file.html#customcontextfile\"}},[_vm._v(\"customContextFile\")]),_vm._v(\" would be easiest, but this is overridden by \"),_c('code',[_vm._v(\"@angular-devkit/build-angular/plugins/karma\")])]),_c('li',[_c('code',[_vm._v(\"karma.conf.js\")]),_vm._v(\" custom middleware which injects the \"),_c('code',[_vm._v(\"getInitialStyles()\")]),_vm._v(\" partial on the fly\")]),_c('li',[_vm._v(\"manipulation of \"),_c('code',[_vm._v(\"karma-context.html\")]),_vm._v(\" via \"),_c('code',[_vm._v(\"post-install\")]),_vm._v(\" or within \"),_c('code',[_vm._v(\"karma.conf.js\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('pre',[_c('code',{staticClass:\"language-tsx\"},[_vm._v(\"// yarn add --dev glob\\n\\n<!-- karma.conf.js -->\\nconst path = require('path');\\nconst fs = require('fs');\\nconst { globSync } = require('glob');\\nconst injectPartials = require('./scripts/injectPartials'); // script referenced by injectPartials for `build` and `serve`\\n\\nconst injectPartialsIntoKarmaContextHtml = () => {\\n  const packagePath = path.resolve(require.resolve('@angular-devkit/build-angular'), '..');\\n  const [filePath] = globSync(packagePath + '/**/karma-context.html');\\n  const backupFilePath = filePath.replace(/\\\\.html$/, '-original$&');\\n\\n  // restore backup\\n  if (fs.existsSync(backupFilePath)) {\\n    fs.copyFileSync(backupFilePath, filePath);\\n    fs.rmSync(backupFilePath);\\n  }\\n\\n  fs.copyFileSync(filePath, backupFilePath); // create backup\\n  const fileContent = fs.readFileSync(filePath, 'utf8');\\n  const modifiedFileContent = injectPartials({}, fileContent);\\n  fs.writeFileSync(filePath, modifiedFileContent);\\n};\\n\\ninjectPartialsIntoKarmaContextHtml();\\n\\nmodule.exports = function (config) {\\n  config.set({\\n    basePath: '',\\n    frameworks: ['jasmine', '@angular-devkit/build-angular'],\\n    // ... rest of config\\n  });\\n}\\n\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"More test examples can be found at the \"),_c('a',{attrs:{\"href\":\"developing/components-ready#testing\"}},[_vm._v(\"componentsReady() documentation\")]),_vm._v(\".\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"We also provide test examples in our \"),_c('a',{attrs:{\"href\":\"https://github.com/porsche-design-system/sample-integration-angular/tree/master/src/app/pages\"}},[_vm._v(\"sample integration project\")]),_vm._v(\".\")])\n}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./testing.md?vue&type=template&id=0505dfd4\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}