(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af9fe"],{"0eb5":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"vmark"},[t("h1",[e._v("Security")]),e._m(0),e._m(1),t("h2",[e._v("Basic")]),e._m(2),t("p",[e._v("For example, this website currently uses the following one.")]),t("Playground",{attrs:{showCodeEditor:!1,frameworkMarkup:[this.currentCSP]}}),t("h2",[e._v("Partials")]),e._m(3),e._m(4),t("p",[e._v("The ones affected are:")]),e._m(5),t("p",[e._v("To allow their result being executed by the browser there are two options:")]),e._m(6),e._m(7),e._m(8),t("Notification",{attrs:{heading:"Important note","heading-tag":"h3",state:"success"}},[e._v(" The returned string from calling a partial, e.g. "),t("code",[e._v("getInitialStyles({ format: 'sha256' })")]),e._v(" is already wrapped in single quotes so it can be used directly in your policy. ")]),t("p",[e._v("So an example integration could look like this.")]),t("Playground",{attrs:{showCodeEditor:!1,frameworkMarkup:[this.integration]}})],1)},n=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("The HTTP "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy"}},[e._v("Content-Security-Policy")]),e._v(" (CSP) response header and meta tag allow website administrators to control resources the user agent is allowed to load for a given page. With a few exceptions, policies mostly involve specifying server origins and script endpoints. This helps guard against cross-site scripting attacks.")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("Therefore, we recommend specifying a Content Security Policy for every website and web app."),t("br"),e._v(" Further information can be found in the "),t("a",{attrs:{href:"https://content-security-policy.com"}},[e._v("Content Security Policy Reference")]),e._v(".")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("By specifying "),t("code",[e._v("https://cdn.ui.porsche.com")]),e._v(" and "),t("code",[e._v("https://cdn.ui.porsche.cn")]),e._v(" for "),t("code",[e._v("default-src")]),e._v(", "),t("code",[e._v("style-src")]),e._v(" and "),t("code",[e._v("script-src")]),e._v(", all basic use cases should be covered.")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("However, the Porsche Design System requires and recommends the usage of "),t("a",{attrs:{href:"partials/introduction"}},[e._v("partials")]),e._v(" for injecting styles/scripts and preloading assets.")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("While partials for preloading are covered by whitelisting our CDN domains from above, partials that produce dynamic innerHTML are "),t("strong",[e._v("not")]),e._v(".")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ul",[t("li",[t("a",{attrs:{href:"partials/initial-styles"}},[e._v("getInitialStyles()")]),e._v(" "),t("strong",[e._v("required since v3.7.0")])]),t("li",[t("a",{attrs:{href:"partials/loader-script"}},[e._v("getLoaderScript()")])]),t("li",[t("a",{attrs:{href:"partials/dsr-ponyfill"}},[e._v("getDSRPonyfill()")])]),t("li",[t("a",{attrs:{href:"partials/browser-support-fallback-script"}},[e._v("getBrowserSupportFallbackScript()")])]),t("li",[t("a",{attrs:{href:"partials/cookies-fallback-script"}},[e._v("getCookiesFallbackScript()")])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ol",[t("li",[e._v("Apply a unique "),t("code",[e._v("nonce")]),e._v(" attribute on the "),t("code",[e._v("script")]),e._v(" and "),t("code",[e._v("style")]),e._v(" tag that the partial produces and whitelist this nonce in the CSP header/meta tag")]),t("li",[e._v("Whitelist the "),t("code",[e._v("script")]),e._v("'s and "),t("code",[e._v("style")]),e._v("'s hashed content in the CSP header/meta tag")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("While the 1st option might be easier to apply by post processing the partial's output it is important that the nonce "),t("strong",[e._v("is not reused")]),e._v(" which means a new nonce has to be generated "),t("strong",[e._v("each time the website is requested")]),e._v(" by a user.")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("p",[e._v("Our recommendation is to go with the 2nd option."),t("br"),e._v(" To make integration easy, the affected partials accept the option "),t("code",[e._v("{ format: 'sha256' }")]),e._v(" in order to receive the hash that needs to be applied with single quotes in the CSP header/meta tag.")])}],o=(r("f8c9"),r("2b0e")),a=r("2fe1"),i=function(e,t,r,s){var n,o=arguments.length,a=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};let c=class extends o["a"]{get currentCSP(){var e;return(null===(e=document.head.querySelector('[http-equiv="Content-Security-Policy"]'))||void 0===e?void 0:e.outerHTML.replace(/content="|; /g,"$&\n  ").replace(/>$/,"\n$&"))||"CSP meta tag not found."}get integration(){return"\nconst styleHashes = [\n  getInitialStyles({ format: 'sha256' })\n].join(' ');\n\nconst scriptHashes = [\n  getBrowserSupportFallbackScript({ format: 'sha256' }),\n  getCookiesFallbackScript({ format: 'sha256' })\n].join(' ');\n\nconst cspContent = [\n  `default-src 'self' https://cdn.ui.porsche.com`,\n  `style-src 'self' ${styleHashes}`,\n  `script-src 'self' https://cdn.ui.porsche.com ${scriptHashes}`,\n  `img-src 'self' https://cdn.ui.porsche.com data:` // data: is needed for inline background images, e.g. used in checkbox-wrapper and radio-button-wrapper\n].join('; ');\n\nreturn (\n  <>\n    <head>\n      <meta http-equiv=\"Content-Security-Policy\" content={cspContent} />\n      {getInitialStyles({ format: 'jsx' })}\n    </head>\n    <body>\n      <div id=\"app\"></div>\n\n      {getBrowserSupportFallbackScript({ format: 'jsx' })}\n      {getCookiesFallbackScript({ format: 'jsx' })}\n    </body>\n  </>\n);"}};c=i([a["b"]],c);var l=c,p=l,h=r("2877"),u=Object(h["a"])(p,s,n,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0af9fe.976f8332.js.map