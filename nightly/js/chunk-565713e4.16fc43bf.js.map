{"version":3,"sources":["webpack:///../utilities/projects/utilities/dist/esm/spacing/spacingStaticXSmall.mjs","webpack:///../utilities/projects/utilities/dist/esm/spacing/spacingStaticMedium.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontVariant.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontLineHeight.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontSizeTextSmall.mjs","webpack:///../utilities/projects/utilities/dist/esm/typography/text/textSmallStyle.mjs","webpack:///../utilities/projects/utilities/dist/esm/spacing/spacingStaticSmall.mjs","webpack:///../components/src/components/text-field-wrapper/text-field-wrapper.examples.md","webpack:///../components/node_modules/imask/esm/core/utils.js","webpack:///../components/node_modules/imask/esm/core/action-details.js","webpack:///../components/node_modules/imask/esm/core/holder.js","webpack:///../components/node_modules/imask/esm/masked/factory.js","webpack:///../components/node_modules/imask/esm/controls/mask-element.js","webpack:///../components/node_modules/imask/esm/controls/html-mask-element.js","webpack:///../components/node_modules/imask/esm/controls/html-input-mask-element.js","webpack:///../components/node_modules/imask/esm/controls/html-contenteditable-mask-element.js","webpack:///../components/node_modules/imask/esm/controls/input.js","webpack:///../components/node_modules/imask/esm/core/change-details.js","webpack:///../components/node_modules/imask/esm/core/continuous-tail-details.js","webpack:///../components/node_modules/imask/esm/masked/base.js","webpack:///../components/node_modules/imask/esm/masked/pattern/chunk-tail-details.js","webpack:///../components/node_modules/imask/esm/masked/pattern/cursor.js","webpack:///../components/node_modules/imask/esm/masked/pattern/fixed-definition.js","webpack:///../components/node_modules/imask/esm/masked/pattern/input-definition.js","webpack:///../components/node_modules/imask/esm/masked/regexp.js","webpack:///../components/node_modules/imask/esm/masked/pattern.js","webpack:///../components/node_modules/imask/esm/masked/range.js","webpack:///../components/node_modules/imask/esm/masked/date.js","webpack:///../components/node_modules/imask/esm/masked/dynamic.js","webpack:///../components/node_modules/imask/esm/masked/enum.js","webpack:///../components/node_modules/imask/esm/masked/function.js","webpack:///../components/node_modules/imask/esm/masked/number.js","webpack:///../components/node_modules/imask/esm/masked/pipe.js","webpack:///../components/node_modules/imask/esm/index.js","webpack:///../components/src/styles/form-state-color-styles.ts","webpack:///../components/src/styles/form-styles.ts","webpack:///../components/src/components/common/required/required-styles.ts","webpack:///../components/src/components/text-field-wrapper/text-field-wrapper-utils.ts","webpack:///../components/src/components/text-field-wrapper/text-field-wrapper.examples.md?d19b","webpack:///../components/src/components/text-field-wrapper/text-field-wrapper.examples.md?686f","webpack:///../utilities/projects/utilities/dist/esm/font/fontHyphenationStyle.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontSizeTextXSmall.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontWeightRegular.mjs","webpack:///../utilities/projects/utilities/dist/esm/typography/text/textShared.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontStyleNormal.mjs","webpack:///../utilities/projects/utilities/dist/esm/font/fontFamily.mjs"],"names":["spacingStaticXSmall","spacingStaticMedium","fontVariant","fontLineHeight","fontSizeTextSmall","textSmallStyle","font","_textFontPartA","_textFontPartB","fontHyphenationStyle","spacingStaticSmall","render","_vm","_c","_self","_setupProxy","staticClass","attrs","_m","_v","hideLabelMarkup","config","hideLabels","model","value","hideLabel","callback","$$v","expression","withDescriptionText","required","disabled","readonly","counter","inputTypeMarkup","inputTypes","inputType","unitPositionMarkup","unitPositions","unitPosition","typePassword","typePasswordWithoutPasswordToggle","typeSearchMarkup","submitButtons","submitButton","typeSearchWithLocateAction","typeSearchWithLocateActionAndLoading","searchExample","demoIsLoading","theme","on","onDemoAction","domProps","demoValue","onDemoInput","_s","stateMarkup","states","state","slots","maskedInput","imaskExample","staticRenderFns","isString","str","String","isObject","obj","_obj$constructor","constructor","name","pick","keys","Array","isArray","_","k","includes","Object","entries","reduce","acc","_ref","v","DIRECTION","NONE","LEFT","FORCE_LEFT","RIGHT","FORCE_RIGHT","forceDirection","direction","escapeRegExp","replace","objectIncludes","b","a","arrA","arrB","i","length","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toString","prototype","hasOwnProperty","call","opts","assign","this","slice","startChangePos","oldValue","oldSelection","start","Math","min","cursorPos","substr","insertedCount","max","end","removedCount","substring","IMask","el","InputMask","maskedClass","mask","Error","MaskedRegExp","MaskedPattern","MaskedDate","Number","MaskedNumber","MaskedDynamic","Masked","Function","MaskedFunction","console","warn","normalizeOpts","instanceOpts","_mask","startsWith","createMask","nOpts","MaskedClass","MaskElement","_unsafeSelectionStart","_unsafeSelectionEnd","selectionStart","selectionEnd","_unsafeSelect","input","super","_handlers","_this$input$getRootNo","_this$input$getRootNo2","_this$input","getRootNode","document","rootElement","activeElement","handlers","forEach","event","_toggleEventHandler","EVENTS_MAP","handler","removeEventListener","addEventListener","selectionChange","drop","click","focus","commit","HTMLMaskElement","setSelectionRange","root","selection","getSelection","anchorOffset","focusOffset","createRange","range","setStart","firstChild","setEnd","lastChild","removeAllRanges","addRange","textContent","HTMLContenteditableMaskElement","isContentEditable","tagName","masked","_listeners","_value","_unmaskedValue","_saveSelection","bind","_onInput","_onChange","_onDrop","_onFocus","_onClick","alignCursor","alignCursorFriendly","_bindEvents","updateValue","_this$masked","maskEquals","updateOptions","unmaskedValue","updateControl","typedValue","val","typedValueEquals","displayValue","bindEvents","unbindEvents","ev","e","listeners","l","_cursorChanging","_changingCursorPos","pos","isActive","select","_selection","newUnmaskedValue","newValue","newDisplayValue","isChanged","_fireChangeEvents","restOpts","updateMask","updateOpts","_delayUpdateCursor","_abortUpdateCursor","setTimeout","_fireEvent","_inputEvent","isComplete","clearTimeout","nearestInputPos","push","hIndex","indexOf","splice","details","oldRawValue","rawInputValue","offset","removed","inserted","removeDirection","raw","updateCursor","doCommit","preventDefault","stopPropagation","_unbindEvents","ChangeDetails","prep","rawInserted","skip","tailShift","ContinuousTailDetails","from","stop","tail","append","aggregate","_appendPlaceholder","beforePos","shiftChar","_update","DEFAULTS","_initialized","withValueRefresh","_rawInputValue","resolve","flags","reset","parse","format","extractInput","fromPos","toPos","appendTo","ch","checkTail","consistentState","doPrepareChar","_appendCharRaw","consistentTail","appended","doValidate","beforeTailState","overwrite","unshift","tailDetails","appendTail","shift","_beforeTailState","doPrepare","ci","d","_appendChar","doSkipInvalid","eager","_appendEager","fn","_refreshing","rawInput","ret","_isolated","Boolean","skipInvalid","normalize","prepare","prepareChar","validate","parent","deleteCount","tailPos","extractTail","eagerRemove","remove","valLength","tval","EMPTY_VALUES","undefined","chunks","map","join","tailChunk","lastChunk","extendLast","extend","firstTailChunk","blockIndex","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","index","_stops","phDetails","_blocks","remainChars","c","props","cstate","chunkShiftPos","_log","ok","_blockStartPos","s","pop","block","pushState","bindBlock","_this$block","_pushLeft","isFixed","isOptional","_pushRight","isUnmasking","_isRawInput","minPos","maxPos","isFilled","appendEager","char","isResolved","placeholderChar","displayChar","lazy","maskOpts","currentMaskFlags","boundPos","_flags$_beforeTailSta","DEFAULT_DEFINITIONS","search","definitions","_rebuildMask","defs","exposeBlock","_maskedBlocks","pattern","unmaskingBlock","optionalBlock","blocks","p","bNames","filter","bName","sort","expose","blockOpts","maskedBlock","isInput","STOP_CHAR","ESCAPE_CHAR","def","maskedState","bi","every","_this$_mapPosToBlock","startBlockIndex","blockIter","blockDetails","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","stopBefore","si","toBlockIndex","startBlockIter","endBlockIndex","_blocks2","bDetails","accVal","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","cursor","pushRightBeforeInput","popState","pushLeftBeforeInput","pushRightBeforeFilled","pushLeftBeforeRequired","pushLeftBeforeFilled","pushRightBeforeRequired","total","totalInputPositions","maskedBlocks","indices","gi","InputDefinition","FixedDefinition","maxLength","to","autofix","patternOpts","fromStr","padStart","toStr","sameCharsCount","repeat","minstr","maxstr","placeholder","num","match","padEnd","nextVal","boundaries","firstNonZero","_matchFrom","MaskedRange","patternBlocks","GET_DEFAULT_BLOCKS","Y","getFullYear","m","getMonth","getDate","bk","date","isDateExist","day","month","year","split","currentMask","exposeMask","compiledMasks","_overwrite","_eager","_skipInvalid","_applyDispatch","prevValueBeforeTail","inputValue","insertValue","tailValue","prevMask","prevMaskState","doDispatch","_flags$_beforeTailSta2","currentMaskRef","dispatch","currentDetails","_this$currentMask","_this$currentMask2","_this$currentMask3","_this$currentMask4","mi","oldMask","_this$currentMask5","inputs","isCurrent","startInputPos","weight","i1","i2","enum","_enum","eopts","lengths","requiredLength","optionalLength","some","MaskedEnum","_updateRegExps","allowNegative","mid","scale","radix","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","parts","prepCh","_removeThousandsSeparators","allowPositive","extendOnSeparators","count","_separatorsCount","_adjustRangeWithSeparators","prevBeforeTailValue","prevBeforeTailSeparatorsCount","_separatorsCountFromSlice","appendDetails","_insertThousandsSeparators","beforeTailValue","beforeTailSeparatorsCount","searchFrom","separatorPos","separatorAroundFromPos","_findSeparatorAround","separatorAroundToPos","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","valid","number","isNaN","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","sign","zeros","test","dropFractional","UNMASKED_RADIX","n","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","toLocaleString","useGrouping","maximumFractionDigits","PIPE_TYPE","MASKED","UNMASKED","TYPED","createPipe","arg","runIsolated","pipe","globalThis","formElementLayeredGap","borderWidthBase","UNIT_POSITIONS","_hasShowPickerSupport","hasDocument","HTMLInputElement","window","navigator","userAgent","__decorate","decorators","target","key","desc","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Code","Vue","themeable","spacing","getTextFieldWrapperCodeSamples","FORM_STATES","$store","getters","playgroundTheme","attr","mounted","initIMask","isDeLocale","Intl","NumberFormat","resolvedOptions","locale","dateFormat","dateRange","textFieldWrapper","querySelector","description","dd","mm","yyyy","Component","component","overflowWrap","hyphens","fontSizeTextXSmall","fontWeightRegular","fontStyleNormal","fontFamily"],"mappings":"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","file":"js/chunk-565713e4.16fc43bf.js","sourcesContent":["const spacingStaticXSmall = '4px';\n\nexport { spacingStaticXSmall };\n","const spacingStaticMedium = '16px';\n\nexport { spacingStaticMedium };\n","const fontVariant = 'normal';\n\nexport { fontVariant };\n","const fontLineHeight = 'calc(6px + 2.125ex)';\n\nexport { fontLineHeight };\n","const fontSizeTextSmall = '1rem';\n\nexport { fontSizeTextSmall };\n","import { _textFontPartA, _textFontPartB } from './textShared.mjs';\nimport { fontHyphenationStyle } from '../../font/fontHyphenationStyle.mjs';\nimport { fontSizeTextSmall } from '../../font/fontSizeTextSmall.mjs';\n\nconst textSmallStyle = {\n    font: `${_textFontPartA}${fontSizeTextSmall}${_textFontPartB}`,\n    ...fontHyphenationStyle,\n};\n\nexport { textSmallStyle };\n","const spacingStaticSmall = '8px';\n\nexport { spacingStaticSmall };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport IMask from 'imask';\nimport { getTextFieldWrapperCodeSamples } from '@porsche-design-system/shared';\nimport { UNIT_POSITIONS } from './text-field-wrapper-utils';\nimport { FORM_STATES } from '../../utils';\nlet Code = class Code extends Vue {\n    constructor() {\n        super(...arguments);\n        this.config = { themeable: true, spacing: 'block' };\n        this.imaskExample = getTextFieldWrapperCodeSamples('example-imask');\n        this.searchExample = getTextFieldWrapperCodeSamples('example-search');\n        this.hideLabel = false;\n        this.hideLabels = [false, true, '{ base: true, l: false }'];\n        this.withDescriptionText = `<p-text-field-wrapper label=\"Some label\" description=\"Some description\">\n  <input type=\"text\" name=\"some-name\" />\n</p-text-field-wrapper>`;\n        this.required = `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"text\" name=\"some-name\" value=\"Some value\" required />\n</p-text-field-wrapper>`;\n        this.disabled = `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"text\" name=\"some-name\" value=\"Some value\" disabled />\n</p-text-field-wrapper>`;\n        this.readonly = `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"text\" name=\"some-name\" value=\"Some value\" readonly />\n</p-text-field-wrapper>`;\n        this.counter = `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"text\" name=\"some-name\" value=\"Some value\" maxlength=\"20\" />\n</p-text-field-wrapper>\n<p-text-field-wrapper label=\"Some label\" show-counter=\"false\">\n  <input type=\"text\" name=\"some-name\" value=\"Some value\" maxlength=\"20\" />\n</p-text-field-wrapper>`;\n        this.inputType = 'text';\n        this.inputTypes = ['text', 'number', 'email', 'tel', 'search', 'url', 'date', 'time', 'month', 'week', 'password'];\n        this.unitPosition = 'prefix';\n        this.unitPositions = UNIT_POSITIONS;\n        this.typePassword = `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"password\" name=\"some-name\" value=\"some password\" />\n</p-text-field-wrapper>`;\n        this.submitButton = true;\n        this.submitButtons = [true, false];\n        this.typeSearchWithLocateAction = `<p-text-field-wrapper label=\"Some label\" action-icon=\"locate\">\n  <input type=\"search\" name=\"some-name\" />\n</p-text-field-wrapper>\n\n<form action=\"#\" onsubmit=\"alert('submit'); return false;\">\n  <p-text-field-wrapper label=\"Some label\" action-icon=\"locate\">\n    <input type=\"search\" name=\"some-name\" />\n  </p-text-field-wrapper>\n</form>`;\n        this.typeSearchWithLocateActionAndLoading = `<p-text-field-wrapper label=\"Some label\" action-icon=\"locate\" action-loading=\"true\">\n  <input type=\"search\" name=\"some-name\" />\n</p-text-field-wrapper>\n\n<form action=\"#\" onsubmit=\"alert('submit'); return false;\">\n  <p-text-field-wrapper label=\"Some label\" action-icon=\"locate\" action-loading=\"true\">\n    <input type=\"search\" name=\"some-name\" />\n  </p-text-field-wrapper>\n</form>`;\n        this.demoValue = '';\n        this.demoIsLoading = false;\n        this.state = 'error';\n        this.states = FORM_STATES;\n        this.slots = `<p-text-field-wrapper state=\"error\">\n  <span slot=\"label\" id=\"some-label-id\">Some label with a <a href=\"https://designsystem.porsche.com\">link</a>.</span>\n  <span slot=\"description\" id=\"some-description-id\">Some description with a <a href=\"https://designsystem.porsche.com\">link</a>.</span>\n  <input type=\"text\" name=\"some-name\" aria-labelledby=\"some-label-id\" aria-describedby=\"some-description-id some-message-id\" />\n  <span slot=\"message\" id=\"some-message-id\">Some error message with a <a href=\"https://designsystem.porsche.com\">link</a>.</span>\n</p-text-field-wrapper>`;\n    }\n    get theme() {\n        return this.$store.getters.playgroundTheme || 'light';\n    }\n    get hideLabelMarkup() {\n        return `<p-text-field-wrapper label=\"Some label\" hide-label=\"${this.hideLabel}\">\n  <input type=\"text\" name=\"some-name\" />\n</p-text-field-wrapper>\n<p-text-field-wrapper label=\"Some label\" hide-label=\"${this.hideLabel}\">\n  <input type=\"text\" placeholder=\"Some placeholder\" name=\"some-name\" />\n</p-text-field-wrapper>`;\n    }\n    get inputTypeMarkup() {\n        return `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"${this.inputType}\" name=\"some-name\" />\n</p-text-field-wrapper>`;\n    }\n    get unitPositionMarkup() {\n        return `<p-text-field-wrapper label=\"Some label\" description=\"The price in Euro\" unit=\"EUR\" unit-position=\"${this.unitPosition}\">\n  <input type=\"number\" name=\"some-name\" value=\"500\" />\n</p-text-field-wrapper>`;\n    }\n    get typePasswordWithoutPasswordToggle() {\n        return this.typePassword.replace(/label=\"Some label\"/, '$& show-password-toggle=\"false\"');\n    }\n    get typeSearchMarkup() {\n        return `<p-text-field-wrapper label=\"Some label\">\n  <input type=\"search\" name=\"some-name\" />\n</p-text-field-wrapper>\n\n<form action=\"#\" onsubmit=\"alert('submit'); return false;\">\n  <p-text-field-wrapper label=\"Some label\" submit-button=\"${this.submitButton}\">\n    <input type=\"search\" name=\"some-name\" />\n  </p-text-field-wrapper>\n</form>`;\n    }\n    onDemoAction() {\n        this.demoIsLoading = true;\n        // simulate async request\n        setTimeout(() => {\n            this.demoValue = 'Stuttgart, Baden-Württemberg';\n            this.demoIsLoading = false;\n        }, 3000);\n    }\n    onDemoInput(e) {\n        this.demoValue = e.target.value;\n        if (this.demoIsLoading) {\n            this.demoIsLoading = false;\n        }\n    }\n    get stateMarkup() {\n        const attr = `message=\"${this.state !== 'none' ? `Some ${this.state} validation message.` : ''}\"`;\n        return `<p-text-field-wrapper label=\"Some label\" state=\"${this.state}\" ${attr}>\n  <input type=\"text\" name=\"some-name\" />\n</p-text-field-wrapper>`;\n    }\n    get maskedInput() {\n        return `<p-text-field-wrapper label=\"Some label\" id=\"date-mask\">\n      <input type=\"text\" />\n    </p-text-field-wrapper>`;\n    }\n    mounted() {\n        this.initIMask();\n    }\n    initIMask() {\n        const isDeLocale = Intl.NumberFormat().resolvedOptions().locale.startsWith('de');\n        const dateFormat = isDeLocale ? 'dd.mm.yyyy' : 'mm/dd/yyyy';\n        const dateRange = isDeLocale ? '01.01.1900, 01.01.2100' : '01/01/1900, 01/01/2100';\n        const textFieldWrapper = document.querySelector('#date-mask');\n        textFieldWrapper.description = `'${dateFormat}' in range [${dateRange}]`;\n        IMask(textFieldWrapper.querySelector('input'), {\n            lazy: false,\n            mask: dateFormat,\n            blocks: {\n                dd: {\n                    mask: IMask.MaskedRange,\n                    from: 1,\n                    to: 31,\n                    placeholderChar: 'd',\n                },\n                mm: {\n                    mask: IMask.MaskedRange,\n                    from: 1,\n                    to: 12,\n                    placeholderChar: 'm',\n                },\n                yyyy: {\n                    mask: IMask.MaskedRange,\n                    from: 1900,\n                    to: 2100,\n                    placeholderChar: 'y',\n                },\n            },\n        });\n    }\n};\nCode = __decorate([\n    Component\n], Code);\nexport default Code;\n","/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n\n/** Checks if value is object */\nfunction isObject(obj) {\n  var _obj$constructor;\n  return typeof obj === 'object' && obj != null && (obj == null || (_obj$constructor = obj.constructor) == null ? void 0 : _obj$constructor.name) === 'Object';\n}\nfunction pick(obj, keys) {\n  if (Array.isArray(keys)) return pick(obj, (_, k) => keys.includes(k));\n  return Object.entries(obj).reduce((acc, _ref) => {\n    let [k, v] = _ref;\n    if (keys(v, k)) acc[k] = v;\n    return acc;\n  }, {});\n}\n\n/** Direction */\nconst DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n\n/** Direction */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n    default:\n      return direction;\n  }\n}\n\n/** Escapes regular expression control chars */\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n}\n\n// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  const arrA = Array.isArray(a),\n    arrB = Array.isArray(b);\n  let i;\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n    for (i = 0; i < a.length; i++) if (!objectIncludes(a[i], b[i])) return false;\n    return true;\n  }\n  if (arrA != arrB) return false;\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const dateA = a instanceof Date,\n      dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    const regexpA = a instanceof RegExp,\n      regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    const keys = Object.keys(a);\n    // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = 0; i < keys.length; i++) if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n  return false;\n}\n\n/** Selection range */\n\nexport { DIRECTION, escapeRegExp, forceDirection, isObject, isString, objectIncludes, pick };\n","import { DIRECTION } from './utils.js';\n\n/** Provides details of changing input */\nclass ActionDetails {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n\n    // double check if left part was changed (autofilling, other non-standard input triggers)\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n  }\n\n  /** Start changing position */\n  get startChangePos() {\n    return Math.min(this.cursorPos, this.oldSelection.start);\n  }\n\n  /** Inserted symbols count */\n  get insertedCount() {\n    return this.cursorPos - this.startChangePos;\n  }\n\n  /** Inserted symbols */\n  get inserted() {\n    return this.value.substr(this.startChangePos, this.insertedCount);\n  }\n\n  /** Removed symbols count */\n  get removedCount() {\n    // Math.max for opposite operation\n    return Math.max(this.oldSelection.end - this.startChangePos ||\n    // for Delete\n    this.oldValue.length - this.value.length, 0);\n  }\n\n  /** Removed symbols */\n  get removed() {\n    return this.oldValue.substr(this.startChangePos, this.removedCount);\n  }\n\n  /** Unchanged head symbols */\n  get head() {\n    return this.value.substring(0, this.startChangePos);\n  }\n\n  /** Unchanged tail symbols */\n  get tail() {\n    return this.value.substring(this.startChangePos + this.insertedCount);\n  }\n\n  /** Remove direction */\n  get removeDirection() {\n    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\n\n    // align right if delete at right\n    return (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) &&\n    // if not range removed (event with backspace)\n    this.oldSelection.end === this.oldSelection.start ? DIRECTION.RIGHT : DIRECTION.LEFT;\n  }\n}\n\nexport { ActionDetails as default };\n","/** Applies mask on element */\nfunction IMask(el, opts) {\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\nexport { IMask as default };\n","import { isString, isObject, pick } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n// export function maskedClass(mask: string): typeof MaskedPattern;\n// export function maskedClass(mask: DateConstructor): typeof MaskedDate;\n// export function maskedClass(mask: NumberConstructor): typeof MaskedNumber;\n// export function maskedClass(mask: Array<any> | ArrayConstructor): typeof MaskedDynamic;\n// export function maskedClass(mask: MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass(mask: Masked): typeof Masked;\n// export function maskedClass(mask: typeof Masked): typeof Masked;\n// export function maskedClass(mask: typeof MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: typeof MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: typeof MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: typeof MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: typeof MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: typeof MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: typeof MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: typeof MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass<Mask extends typeof Masked> (mask: Mask): Mask;\n// export function maskedClass(mask: RegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: (value: string, ...args: any[]) => boolean): typeof MaskedFunction;\n/** Get Masked class by mask type */\nfunction maskedClass(mask) /* TODO */{\n  if (mask == null) throw new Error('mask property should be defined');\n  if (mask instanceof RegExp) return IMask.MaskedRegExp;\n  if (isString(mask)) return IMask.MaskedPattern;\n  if (mask === Date) return IMask.MaskedDate;\n  if (mask === Number) return IMask.MaskedNumber;\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic;\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask;\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask.constructor;\n  if (mask instanceof Function) return IMask.MaskedFunction;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  return IMask.Masked;\n}\nfunction normalizeOpts(opts) {\n  if (!opts) throw new Error('Options in not defined');\n  if (IMask.Masked) {\n    if (opts.prototype instanceof IMask.Masked) return {\n      mask: opts\n    };\n\n    /*\n      handle cases like:\n      1) opts = Masked\n      2) opts = { mask: Masked, ...instanceOpts }\n    */\n    const {\n      mask = undefined,\n      ...instanceOpts\n    } = opts instanceof IMask.Masked ? {\n      mask: opts\n    } : isObject(opts) && opts.mask instanceof IMask.Masked ? opts : {};\n    if (mask) {\n      const _mask = mask.mask;\n      return {\n        ...pick(mask, (_, k) => !k.startsWith('_')),\n        mask: mask.constructor,\n        _mask,\n        ...instanceOpts\n      };\n    }\n  }\n  if (!isObject(opts)) return {\n    mask: opts\n  };\n  return {\n    ...opts\n  };\n}\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n\n// From masked\n// export default function createMask<Opts extends Masked, ReturnMasked=Opts> (opts: Opts): ReturnMasked;\n// // From masked class\n// export default function createMask<Opts extends MaskedOptions<typeof Masked>, ReturnMasked extends Masked=InstanceType<Opts['mask']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDate>, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedNumber>, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedEnum>, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRange>, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedFunction>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedPattern>, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDynamic>, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// // From mask opts\n// export default function createMask<Opts extends MaskedOptions<Masked>, ReturnMasked=Opts extends MaskedOptions<infer M> ? M : never> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedNumberOptions, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDateFactoryOptions, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedEnumOptions, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedRangeOptions, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedPatternOptions, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDynamicOptions, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<RegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<Function>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n\n/** Creates new {@link Masked} depending on mask type */\nfunction createMask(opts) {\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  const nOpts = normalizeOpts(opts);\n  const MaskedClass = maskedClass(nOpts.mask);\n  if (!MaskedClass) throw new Error('Masked class is not found for provided mask, appropriate module needs to be imported manually before creating mask.');\n  if (nOpts.mask === MaskedClass) delete nOpts.mask;\n  if (nOpts._mask) {\n    nOpts.mask = nOpts._mask;\n    delete nOpts._mask;\n  }\n  return new MaskedClass(nOpts);\n}\nIMask.createMask = createMask;\n\nexport { createMask as default, maskedClass, normalizeOpts };\n","import IMask from '../core/holder.js';\n\n/**  Generic element API to use with mask */\nclass MaskElement {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Safely returns selection start */\n  get selectionStart() {\n    let start;\n    try {\n      start = this._unsafeSelectionStart;\n    } catch {}\n    return start != null ? start : this.value.length;\n  }\n\n  /** Safely returns selection end */\n  get selectionEnd() {\n    let end;\n    try {\n      end = this._unsafeSelectionEnd;\n    } catch {}\n    return end != null ? end : this.value.length;\n  }\n\n  /** Safely sets element selection */\n  select(start, end) {\n    if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n    try {\n      this._unsafeSelect(start, end);\n    } catch {}\n  }\n\n  /** */\n  get isActive() {\n    return false;\n  }\n  /** */\n\n  /** */\n\n  /** */\n}\n\nIMask.MaskElement = MaskElement;\n\nexport { MaskElement as default };\n","import MaskElement from './mask-element.js';\nimport IMask from '../core/holder.js';\n\n/** Bridge between HTMLElement and {@link Masked} */\nclass HTMLMaskElement extends MaskElement {\n  /** HTMLElement to use mask on */\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this._handlers = {};\n  }\n  get rootElement() {\n    var _this$input$getRootNo, _this$input$getRootNo2, _this$input;\n    return (_this$input$getRootNo = (_this$input$getRootNo2 = (_this$input = this.input).getRootNode) == null ? void 0 : _this$input$getRootNo2.call(_this$input)) != null ? _this$input$getRootNo : document;\n  }\n\n  /**\n    Is element in focus\n  */\n  get isActive() {\n    return this.input === this.rootElement.activeElement;\n  }\n\n  /**\n    Binds HTMLElement events to mask internal events\n  */\n  bindEvents(handlers) {\n    Object.keys(handlers).forEach(event => this._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]));\n  }\n\n  /**\n    Unbinds HTMLElement events to mask internal events\n  */\n  unbindEvents() {\n    Object.keys(this._handlers).forEach(event => this._toggleEventHandler(event));\n  }\n  _toggleEventHandler(event, handler) {\n    if (this._handlers[event]) {\n      this.input.removeEventListener(event, this._handlers[event]);\n      delete this._handlers[event];\n    }\n    if (handler) {\n      this.input.addEventListener(event, handler);\n      this._handlers[event] = handler;\n    }\n  }\n}\n/** Mapping between HTMLElement events and mask internal events */\nHTMLMaskElement.EVENTS_MAP = {\n  selectionChange: 'keydown',\n  input: 'input',\n  drop: 'drop',\n  click: 'click',\n  focus: 'focus',\n  commit: 'blur'\n};\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\n/** Bridge between InputElement and {@link Masked} */\nclass HTMLInputMaskElement extends HTMLMaskElement {\n  /** InputElement to use mask on */\n\n  constructor(input) {\n    super(input);\n    this.input = input;\n    this._handlers = {};\n  }\n\n  /** Returns InputElement selection start */\n  get _unsafeSelectionStart() {\n    return this.input.selectionStart != null ? this.input.selectionStart : this.value.length;\n  }\n\n  /** Returns InputElement selection end */\n  get _unsafeSelectionEnd() {\n    return this.input.selectionEnd;\n  }\n\n  /** Sets InputElement selection */\n  _unsafeSelect(start, end) {\n    this.input.setSelectionRange(start, end);\n  }\n  get value() {\n    return this.input.value;\n  }\n  set value(value) {\n    this.input.value = value;\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLInputMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\nclass HTMLContenteditableMaskElement extends HTMLMaskElement {\n  /** Returns HTMLElement selection start */\n  get _unsafeSelectionStart() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset < focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Returns HTMLElement selection end */\n  get _unsafeSelectionEnd() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset > focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Sets HTMLElement selection */\n  _unsafeSelect(start, end) {\n    if (!this.rootElement.createRange) return;\n    const range = this.rootElement.createRange();\n    range.setStart(this.input.firstChild || this.input, start);\n    range.setEnd(this.input.lastChild || this.input, end);\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  /** HTMLElement value */\n  get value() {\n    return this.input.textContent || '';\n  }\n  set value(value) {\n    this.input.textContent = value;\n  }\n}\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\nexport { HTMLContenteditableMaskElement as default };\n","import { objectIncludes, DIRECTION } from '../core/utils.js';\nimport ActionDetails from '../core/action-details.js';\nimport createMask, { maskedClass } from '../masked/factory.js';\nimport MaskElement from './mask-element.js';\nimport HTMLInputMaskElement from './html-input-mask-element.js';\nimport HTMLContenteditableMaskElement from './html-contenteditable-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './html-mask-element.js';\n\n/** Listens to element events and controls changes between element and {@link Masked} */\nclass InputMask {\n  /**\n    View element\n  */\n\n  /** Internal {@link Masked} model */\n\n  constructor(el, opts) {\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLInputMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n    this._bindEvents();\n\n    // refresh\n    this.updateValue();\n    this._onChange();\n  }\n  maskEquals(mask) {\n    var _this$masked;\n    return mask == null || ((_this$masked = this.masked) == null ? void 0 : _this$masked.maskEquals(mask));\n  }\n\n  /** Masked */\n  get mask() {\n    return this.masked.mask;\n  }\n  set mask(mask) {\n    if (this.maskEquals(mask)) return;\n    if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n      // TODO \"any\" no idea\n      this.masked.updateOptions({\n        mask\n      });\n      return;\n    }\n    const masked = mask instanceof IMask.Masked ? mask : createMask({\n      mask\n    });\n    masked.unmaskedValue = this.masked.unmaskedValue;\n    this.masked = masked;\n  }\n\n  /** Raw value */\n  get value() {\n    return this._value;\n  }\n  set value(str) {\n    if (this.value === str) return;\n    this.masked.value = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Unmasked value */\n  get unmaskedValue() {\n    return this._unmaskedValue;\n  }\n  set unmaskedValue(str) {\n    if (this.unmaskedValue === str) return;\n    this.masked.unmaskedValue = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Typed unmasked value */\n  get typedValue() {\n    return this.masked.typedValue;\n  }\n  set typedValue(val) {\n    if (this.masked.typedValueEquals(val)) return;\n    this.masked.typedValue = val;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Display value */\n  get displayValue() {\n    return this.masked.displayValue;\n  }\n\n  /** Starts listening to element events */\n  _bindEvents() {\n    this.el.bindEvents({\n      selectionChange: this._saveSelection,\n      input: this._onInput,\n      drop: this._onDrop,\n      click: this._onClick,\n      focus: this._onFocus,\n      commit: this._onChange\n    });\n  }\n\n  /** Stops listening to element events */\n  _unbindEvents() {\n    if (this.el) this.el.unbindEvents();\n  }\n\n  /** Fires custom event */\n  _fireEvent(ev, e) {\n    const listeners = this._listeners[ev];\n    if (!listeners) return;\n    listeners.forEach(l => l(e));\n  }\n\n  /** Current selection start */\n  get selectionStart() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n  }\n\n  /** Current cursor position */\n  get cursorPos() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n  }\n  set cursorPos(pos) {\n    if (!this.el || !this.el.isActive) return;\n    this.el.select(pos, pos);\n    this._saveSelection();\n  }\n\n  /** Stores current selection */\n  _saveSelection( /* ev */\n  ) {\n    if (this.displayValue !== this.el.value) {\n      console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n    }\n\n    this._selection = {\n      start: this.selectionStart,\n      end: this.cursorPos\n    };\n  }\n\n  /** Syncronizes model value from view */\n  updateValue() {\n    this.masked.value = this.el.value;\n    this._value = this.masked.value;\n  }\n\n  /** Syncronizes view from model value, fires change events */\n  updateControl() {\n    const newUnmaskedValue = this.masked.unmaskedValue;\n    const newValue = this.masked.value;\n    const newDisplayValue = this.displayValue;\n    const isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;\n    this._unmaskedValue = newUnmaskedValue;\n    this._value = newValue;\n    if (this.el.value !== newDisplayValue) this.el.value = newDisplayValue;\n    if (isChanged) this._fireChangeEvents();\n  }\n\n  /** Updates options with deep equal check, recreates {@link Masked} model if mask type changes */\n  updateOptions(opts) {\n    const {\n      mask,\n      ...restOpts\n    } = opts;\n    const updateMask = !this.maskEquals(mask);\n    const updateOpts = !objectIncludes(this.masked, restOpts);\n    if (updateMask) this.mask = mask;\n    if (updateOpts) this.masked.updateOptions(restOpts); // TODO\n\n    if (updateMask || updateOpts) this.updateControl();\n  }\n\n  /** Updates cursor */\n  updateCursor(cursorPos) {\n    if (cursorPos == null) return;\n    this.cursorPos = cursorPos;\n\n    // also queue change cursor for mobile browsers\n    this._delayUpdateCursor(cursorPos);\n  }\n\n  /** Delays cursor update to support mobile browsers */\n  _delayUpdateCursor(cursorPos) {\n    this._abortUpdateCursor();\n    this._changingCursorPos = cursorPos;\n    this._cursorChanging = setTimeout(() => {\n      if (!this.el) return; // if was destroyed\n      this.cursorPos = this._changingCursorPos;\n      this._abortUpdateCursor();\n    }, 10);\n  }\n\n  /** Fires custom events */\n  _fireChangeEvents() {\n    this._fireEvent('accept', this._inputEvent);\n    if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n  }\n\n  /** Aborts delayed cursor update */\n  _abortUpdateCursor() {\n    if (this._cursorChanging) {\n      clearTimeout(this._cursorChanging);\n      delete this._cursorChanging;\n    }\n  }\n\n  /** Aligns cursor to nearest available position */\n  alignCursor() {\n    this.cursorPos = this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT));\n  }\n\n  /** Aligns cursor only if selection is empty */\n  alignCursorFriendly() {\n    if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n    this.alignCursor();\n  }\n\n  /** Adds listener on custom event */\n  on(ev, handler) {\n    if (!this._listeners[ev]) this._listeners[ev] = [];\n    this._listeners[ev].push(handler);\n    return this;\n  }\n\n  /** Removes custom event listener */\n  off(ev, handler) {\n    if (!this._listeners[ev]) return this;\n    if (!handler) {\n      delete this._listeners[ev];\n      return this;\n    }\n    const hIndex = this._listeners[ev].indexOf(handler);\n    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n    return this;\n  }\n\n  /** Handles view input event */\n  _onInput(e) {\n    this._inputEvent = e;\n    this._abortUpdateCursor();\n\n    // fix strange IE behavior\n    if (!this._selection) return this.updateValue();\n    const details = new ActionDetails({\n      // new state\n      value: this.el.value,\n      cursorPos: this.cursorPos,\n      // old state\n      oldValue: this.displayValue,\n      oldSelection: this._selection\n    });\n    const oldRawValue = this.masked.rawInputValue;\n    const offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection, {\n      input: true,\n      raw: true\n    }).offset;\n\n    // force align in remove direction only if no input chars were removed\n    // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n    const removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n    let cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n    if (removeDirection !== DIRECTION.NONE) cursorPos = this.masked.nearestInputPos(cursorPos, DIRECTION.NONE);\n    this.updateControl();\n    this.updateCursor(cursorPos);\n    delete this._inputEvent;\n  }\n\n  /** Handles view change event and commits model value */\n  _onChange() {\n    if (this.displayValue !== this.el.value) {\n      this.updateValue();\n    }\n    this.masked.doCommit();\n    this.updateControl();\n    this._saveSelection();\n  }\n\n  /** Handles view drop event, prevents by default */\n  _onDrop(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Restore last selection on focus */\n  _onFocus(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Restore last selection on focus */\n  _onClick(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Unbind view events and removes element reference */\n  destroy() {\n    this._unbindEvents();\n    this._listeners.length = 0;\n    delete this.el;\n  }\n}\nIMask.InputMask = InputMask;\n\nexport { InputMask as default };\n","import IMask from './holder.js';\n\n/** Provides details of changing model value */\nclass ChangeDetails {\n  /** Inserted symbols */\n\n  /** Can skip chars */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n\n  static normalize(prep) {\n    return Array.isArray(prep) ? prep : [prep, new ChangeDetails()];\n  }\n  constructor(details) {\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      skip: false,\n      tailShift: 0\n    }, details);\n  }\n\n  /** Aggregate changes */\n  aggregate(details) {\n    this.rawInserted += details.rawInserted;\n    this.skip = this.skip || details.skip;\n    this.inserted += details.inserted;\n    this.tailShift += details.tailShift;\n    return this;\n  }\n\n  /** Total offset considering all changes */\n  get offset() {\n    return this.tailShift + this.inserted.length;\n  }\n}\nIMask.ChangeDetails = ChangeDetails;\n\nexport { ChangeDetails as default };\n","/** Provides details of continuous extracted tail */\nclass ContinuousTailDetails {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n\n  constructor(value, from, stop) {\n    if (value === void 0) {\n      value = '';\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n  toString() {\n    return this.value;\n  }\n  extend(tail) {\n    this.value += String(tail);\n  }\n  appendTo(masked) {\n    return masked.append(this.toString(), {\n      tail: true\n    }).aggregate(masked._appendPlaceholder());\n  }\n  get state() {\n    return {\n      value: this.value,\n      from: this.from,\n      stop: this.stop\n    };\n  }\n  set state(state) {\n    Object.assign(this, state);\n  }\n  unshift(beforePos) {\n    if (!this.value.length || beforePos != null && this.from >= beforePos) return '';\n    const shiftChar = this.value[0];\n    this.value = this.value.slice(1);\n    return shiftChar;\n  }\n  shift() {\n    if (!this.value.length) return '';\n    const shiftChar = this.value[this.value.length - 1];\n    this.value = this.value.slice(0, -1);\n    return shiftChar;\n  }\n}\n\nexport { ContinuousTailDetails as default };\n","import ChangeDetails from '../core/change-details.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport { isString, DIRECTION, forceDirection } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n/** Append flags */\n\n/** Extract flags */\n\n// see https://github.com/microsoft/TypeScript/issues/6223\n\n/** Provides common masking stuff */\nclass Masked {\n  /** */\n\n  /** */\n\n  /** Transforms value before mask processing */\n\n  /** Transforms each char before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing at the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    this._value = '';\n    this._update({\n      ...Masked.DEFAULTS,\n      ...opts\n    });\n    this._initialized = true;\n  }\n\n  /** Sets and applies new options */\n  updateOptions(opts) {\n    if (!Object.keys(opts).length) return;\n    this.withValueRefresh(this._update.bind(this, opts));\n  }\n\n  /** Sets new options */\n  _update(opts) {\n    Object.assign(this, opts);\n  }\n\n  /** Mask state */\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n  }\n\n  /** Resets value */\n  reset() {\n    this._value = '';\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    this.resolve(value, {\n      input: true\n    });\n  }\n\n  /** Resolve new value */\n  resolve(value, flags) {\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    this.reset();\n    this.append(value, flags, '');\n    this.doCommit();\n  }\n  get unmaskedValue() {\n    return this.value;\n  }\n  set unmaskedValue(value) {\n    this.resolve(value, {});\n  }\n  get typedValue() {\n    return this.parse ? this.parse(this.value, this) : this.unmaskedValue;\n  }\n  set typedValue(value) {\n    if (this.format) {\n      this.value = this.format(value, this);\n    } else {\n      this.unmaskedValue = String(value);\n    }\n  }\n\n  /** Value that includes raw user input */\n  get rawInputValue() {\n    return this.extractInput(0, this.displayValue.length, {\n      raw: true\n    });\n  }\n  set rawInputValue(value) {\n    this.resolve(value, {\n      raw: true\n    });\n  }\n  get displayValue() {\n    return this.value;\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return this.isComplete;\n  }\n\n  /** Finds nearest input position in direction */\n  nearestInputPos(cursorPos, direction) {\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return Math.min(this.displayValue.length, toPos - fromPos);\n  }\n\n  /** Extracts value in range considering flags */\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return this.displayValue.slice(fromPos, toPos);\n  }\n\n  /** Extracts tail in range */\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n  }\n\n  /** Appends tail */\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n\n  /** Appends char */\n  _appendCharRaw(ch, flags) {\n    if (!ch) return new ChangeDetails();\n    this._value += ch;\n    return new ChangeDetails({\n      inserted: ch,\n      rawInserted: ch\n    });\n  }\n\n  /** Appends char */\n  _appendChar(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const consistentState = this.state;\n    let details;\n    [ch, details] = this.doPrepareChar(ch, flags);\n    details = details.aggregate(this._appendCharRaw(ch, flags));\n    if (details.inserted) {\n      let consistentTail;\n      let appended = this.doValidate(flags) !== false;\n      if (appended && checkTail != null) {\n        // validation ok, check tail\n        const beforeTailState = this.state;\n        if (this.overwrite === true) {\n          consistentTail = checkTail.state;\n          checkTail.unshift(this.displayValue.length - details.tailShift);\n        }\n        let tailDetails = this.appendTail(checkTail);\n        appended = tailDetails.rawInserted === checkTail.toString();\n\n        // not ok, try shift\n        if (!(appended && tailDetails.inserted) && this.overwrite === 'shift') {\n          this.state = beforeTailState;\n          consistentTail = checkTail.state;\n          checkTail.shift();\n          tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted === checkTail.toString();\n        }\n\n        // if ok, rollback state after tail\n        if (appended && tailDetails.inserted) this.state = beforeTailState;\n      }\n\n      // revert all if something went wrong\n      if (!appended) {\n        details = new ChangeDetails();\n        this.state = consistentState;\n        if (checkTail && consistentTail) checkTail.state = consistentTail;\n      }\n    }\n    return details;\n  }\n\n  /** Appends optional placeholder at the end */\n  _appendPlaceholder() {\n    return new ChangeDetails();\n  }\n\n  /** Appends optional eager placeholder at the end */\n  _appendEager() {\n    return new ChangeDetails();\n  }\n\n  /** Appends symbols considering flags */\n  append(str, flags, tail) {\n    if (!isString(str)) throw new Error('value should be string');\n    const checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n    if (flags != null && flags.tail) flags._beforeTailState = this.state;\n    let details;\n    [str, details] = this.doPrepare(str, flags);\n    for (let ci = 0; ci < str.length; ++ci) {\n      const d = this._appendChar(str[ci], flags, checkTail);\n      if (!d.rawInserted && !this.doSkipInvalid(str[ci], flags, checkTail)) break;\n      details.aggregate(d);\n    }\n    if ((this.eager === true || this.eager === 'append') && flags != null && flags.input && str) {\n      details.aggregate(this._appendEager());\n    }\n\n    // append tail but aggregate only tailShift\n    if (checkTail != null) {\n      details.tailShift += this.appendTail(checkTail).tailShift;\n      // TODO it's a good idea to clear state after appending ends\n      // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n      // this._resetBeforeTailState();\n    }\n\n    return details;\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    this._value = this.displayValue.slice(0, fromPos) + this.displayValue.slice(toPos);\n    return new ChangeDetails();\n  }\n\n  /** Calls function and reapplies current value */\n  withValueRefresh(fn) {\n    if (this._refreshing || !this._initialized) return fn();\n    this._refreshing = true;\n    const rawInput = this.rawInputValue;\n    const value = this.value;\n    const ret = fn();\n    this.rawInputValue = rawInput;\n    // append lost trailing chars at the end\n    if (this.value && this.value !== value && value.indexOf(this.value) === 0) {\n      this.append(value.slice(this.displayValue.length), {}, '');\n    }\n    delete this._refreshing;\n    return ret;\n  }\n  runIsolated(fn) {\n    if (this._isolated || !this._initialized) return fn(this);\n    this._isolated = true;\n    const state = this.state;\n    const ret = fn(this);\n    this.state = state;\n    delete this._isolated;\n    return ret;\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    return Boolean(this.skipInvalid);\n  }\n\n  /** Prepares string before mask processing */\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepare ? this.prepare(str, this, flags) : str);\n  }\n\n  /** Prepares each char before mask processing */\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepareChar ? this.prepareChar(str, this, flags) : str);\n  }\n\n  /** Validates if value is acceptable */\n  doValidate(flags) {\n    return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n  }\n\n  /** Does additional processing at the end of editing */\n  doCommit() {\n    if (this.commit) this.commit(this.value, this);\n  }\n  splice(start, deleteCount, inserted, removeDirection, flags) {\n    if (removeDirection === void 0) {\n      removeDirection = DIRECTION.NONE;\n    }\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    const tailPos = start + deleteCount;\n    const tail = this.extractTail(tailPos);\n    const eagerRemove = this.eager === true || this.eager === 'remove';\n    let oldRawValue;\n    if (eagerRemove) {\n      removeDirection = forceDirection(removeDirection);\n      oldRawValue = this.extractInput(0, tailPos, {\n        raw: true\n      });\n    }\n    let startChangePos = start;\n    const details = new ChangeDetails();\n\n    // if it is just deletion without insertion\n    if (removeDirection !== DIRECTION.NONE) {\n      startChangePos = this.nearestInputPos(start, deleteCount > 1 && start !== 0 && !eagerRemove ? DIRECTION.NONE : removeDirection);\n\n      // adjust tailShift if start was aligned\n      details.tailShift = startChangePos - start;\n    }\n    details.aggregate(this.remove(startChangePos));\n    if (eagerRemove && removeDirection !== DIRECTION.NONE && oldRawValue === this.rawInputValue) {\n      if (removeDirection === DIRECTION.FORCE_LEFT) {\n        let valLength;\n        while (oldRawValue === this.rawInputValue && (valLength = this.displayValue.length)) {\n          details.aggregate(new ChangeDetails({\n            tailShift: -1\n          })).aggregate(this.remove(valLength - 1));\n        }\n      } else if (removeDirection === DIRECTION.FORCE_RIGHT) {\n        tail.unshift();\n      }\n    }\n    return details.aggregate(this.append(inserted, flags, tail));\n  }\n  maskEquals(mask) {\n    return this.mask === mask;\n  }\n  typedValueEquals(value) {\n    const tval = this.typedValue;\n    return value === tval || Masked.EMPTY_VALUES.includes(value) && Masked.EMPTY_VALUES.includes(tval) || (this.format ? this.format(value, this) === this.format(this.typedValue, this) : false);\n  }\n}\nMasked.DEFAULTS = {\n  skipInvalid: true\n};\nMasked.EMPTY_VALUES = [undefined, null, ''];\nIMask.Masked = Masked;\n\nexport { Masked as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport IMask from '../../core/holder.js';\n\nclass ChunksTailDetails {\n  /** */\n\n  constructor(chunks, from) {\n    if (chunks === void 0) {\n      chunks = [];\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.chunks = chunks;\n    this.from = from;\n  }\n  toString() {\n    return this.chunks.map(String).join('');\n  }\n  extend(tailChunk) {\n    if (!String(tailChunk)) return;\n    tailChunk = isString(tailChunk) ? new ContinuousTailDetails(String(tailChunk)) : tailChunk;\n    const lastChunk = this.chunks[this.chunks.length - 1];\n    const extendLast = lastChunk && (\n    // if stops are same or tail has no stop\n    lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\n    // if tail chunk goes just after last chunk\n    tailChunk.from === lastChunk.from + lastChunk.toString().length;\n    if (tailChunk instanceof ContinuousTailDetails) {\n      // check the ability to extend previous chunk\n      if (extendLast) {\n        // extend previous chunk\n        lastChunk.extend(tailChunk.toString());\n      } else {\n        // append new chunk\n        this.chunks.push(tailChunk);\n      }\n    } else if (tailChunk instanceof ChunksTailDetails) {\n      if (tailChunk.stop == null) {\n        // unwrap floating chunks to parent, keeping `from` pos\n        let firstTailChunk;\n        while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n          firstTailChunk = tailChunk.chunks.shift(); // not possible to be `undefined` because length was checked above\n          firstTailChunk.from += tailChunk.from;\n          this.extend(firstTailChunk);\n        }\n      }\n\n      // if tail chunk still has value\n      if (tailChunk.toString()) {\n        // if chunks contains stops, then popup stop to container\n        tailChunk.stop = tailChunk.blockIndex;\n        this.chunks.push(tailChunk);\n      }\n    }\n  }\n  appendTo(masked) {\n    if (!(masked instanceof IMask.MaskedPattern)) {\n      const tail = new ContinuousTailDetails(this.toString());\n      return tail.appendTo(masked);\n    }\n    const details = new ChangeDetails();\n    for (let ci = 0; ci < this.chunks.length && !details.skip; ++ci) {\n      const chunk = this.chunks[ci];\n      const lastBlockIter = masked._mapPosToBlock(masked.displayValue.length);\n      const stop = chunk.stop;\n      let chunkBlock;\n      if (stop != null && (\n      // if block not found or stop is behind lastBlock\n      !lastBlockIter || lastBlockIter.index <= stop)) {\n        if (chunk instanceof ChunksTailDetails ||\n        // for continuous block also check if stop is exist\n        masked._stops.indexOf(stop) >= 0) {\n          const phDetails = masked._appendPlaceholder(stop);\n          details.aggregate(phDetails);\n        }\n        chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n      }\n      if (chunkBlock) {\n        const tailDetails = chunkBlock.appendTail(chunk);\n        tailDetails.skip = false; // always ignore skip, it will be set on last\n        details.aggregate(tailDetails);\n        masked._value += tailDetails.inserted;\n\n        // get not inserted chars\n        const remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n        if (remainChars) details.aggregate(masked.append(remainChars, {\n          tail: true\n        }));\n      } else {\n        details.aggregate(masked.append(chunk.toString(), {\n          tail: true\n        }));\n      }\n    }\n    return details;\n  }\n  get state() {\n    return {\n      chunks: this.chunks.map(c => c.state),\n      from: this.from,\n      stop: this.stop,\n      blockIndex: this.blockIndex\n    };\n  }\n  set state(state) {\n    const {\n      chunks,\n      ...props\n    } = state;\n    Object.assign(this, props);\n    this.chunks = chunks.map(cstate => {\n      const chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails();\n      chunk.state = cstate;\n      return chunk;\n    });\n  }\n  unshift(beforePos) {\n    if (!this.chunks.length || beforePos != null && this.from >= beforePos) return '';\n    const chunkShiftPos = beforePos != null ? beforePos - this.from : beforePos;\n    let ci = 0;\n    while (ci < this.chunks.length) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.unshift(chunkShiftPos);\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        ++ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n  shift() {\n    if (!this.chunks.length) return '';\n    let ci = this.chunks.length - 1;\n    while (0 <= ci) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.shift();\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        --ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n}\n\nexport { ChunksTailDetails as default };\n","import { DIRECTION } from '../../core/utils.js';\n\nclass PatternCursor {\n  constructor(masked, pos) {\n    this.masked = masked;\n    this._log = [];\n    const {\n      offset,\n      index\n    } = masked._mapPosToBlock(pos) || (pos < 0 ?\n    // first\n    {\n      index: 0,\n      offset: 0\n    } :\n    // last\n    {\n      index: this.masked._blocks.length,\n      offset: 0\n    });\n    this.offset = offset;\n    this.index = index;\n    this.ok = false;\n  }\n  get block() {\n    return this.masked._blocks[this.index];\n  }\n  get pos() {\n    return this.masked._blockStartPos(this.index) + this.offset;\n  }\n  get state() {\n    return {\n      index: this.index,\n      offset: this.offset,\n      ok: this.ok\n    };\n  }\n  set state(s) {\n    Object.assign(this, s);\n  }\n  pushState() {\n    this._log.push(this.state);\n  }\n  popState() {\n    const s = this._log.pop();\n    if (s) this.state = s;\n    return s;\n  }\n  bindBlock() {\n    if (this.block) return;\n    if (this.index < 0) {\n      this.index = 0;\n      this.offset = 0;\n    }\n    if (this.index >= this.masked._blocks.length) {\n      this.index = this.masked._blocks.length - 1;\n      this.offset = this.block.displayValue.length; // TODO this is stupid type error, `block` depends on index that was changed above\n    }\n  }\n\n  _pushLeft(fn) {\n    this.pushState();\n    for (this.bindBlock(); 0 <= this.index; --this.index, this.offset = ((_this$block = this.block) == null ? void 0 : _this$block.displayValue.length) || 0) {\n      var _this$block;\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  _pushRight(fn) {\n    this.pushState();\n    for (this.bindBlock(); this.index < this.masked._blocks.length; ++this.index, this.offset = 0) {\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  pushLeftBeforeFilled() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_LEFT);\n      if (this.offset !== 0) return true;\n    });\n  }\n  pushLeftBeforeInput() {\n    // cases:\n    // filled input: 00|\n    // optional empty input: 00[]|\n    // nested block: XX<[]>|\n    return this._pushLeft(() => {\n      if (this.block.isFixed) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushLeftBeforeRequired() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushRightBeforeFilled() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_RIGHT);\n      if (this.offset !== this.block.value.length) return true;\n    });\n  }\n  pushRightBeforeInput() {\n    return this._pushRight(() => {\n      if (this.block.isFixed) return;\n\n      // const o = this.offset;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      // HACK cases like (STILL DOES NOT WORK FOR NESTED)\n      // aa|X\n      // aa<X|[]>X_    - this will not work\n      // if (o && o === this.offset && this.block instanceof PatternInputDefinition) continue;\n      return true;\n    });\n  }\n  pushRightBeforeRequired() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n\n      // TODO check |[*]XX_\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      return true;\n    });\n  }\n}\n\nexport { PatternCursor as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION, isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport '../../core/holder.js';\n\nclass PatternFixedDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n    this._value = '';\n    this.isFixed = true;\n  }\n  get value() {\n    return this._value;\n  }\n  get unmaskedValue() {\n    return this.isUnmasking ? this.value : '';\n  }\n  get rawInputValue() {\n    return this._isRawInput ? this.value : '';\n  }\n  get displayValue() {\n    return this.value;\n  }\n  reset() {\n    this._isRawInput = false;\n    this._value = '';\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n    if (!this._value) this._isRawInput = false;\n    return new ChangeDetails();\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this._value.length;\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return minPos;\n      case DIRECTION.NONE:\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n      default:\n        return maxPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    return this._isRawInput ? toPos - fromPos : 0;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return Boolean(this._value);\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    const appendEager = this.eager === true || this.eager === 'append';\n    const appended = this.char === ch;\n    const isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && (!flags.raw || !appendEager) && !flags.tail;\n    if (isResolved) details.rawInserted = this.char;\n    this._value = details.inserted = this.char;\n    this._isRawInput = isResolved && (flags.raw || flags.input);\n    return details;\n  }\n  _appendEager() {\n    return this._appendChar(this.char, {\n      tail: true\n    });\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    this._value = details.inserted = this.char;\n    return details;\n  }\n  extractTail() {\n    return new ContinuousTailDetails('');\n  }\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n  append(str, flags, tail) {\n    const details = this._appendChar(str[0], flags);\n    if (tail != null) {\n      details.tailShift += this.appendTail(tail).tailShift;\n    }\n    return details;\n  }\n  doCommit() {}\n  get state() {\n    return {\n      _value: this._value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n    this._isRawInput = Boolean(state._rawInputValue);\n  }\n}\n\nexport { PatternFixedDefinition as default };\n","import createMask from '../factory.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION } from '../../core/utils.js';\nimport '../../core/holder.js';\n\nclass PatternInputDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    const {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager,\n      ...maskOpts\n    } = opts;\n    this.masked = createMask(maskOpts);\n    Object.assign(this, {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager\n    });\n  }\n  reset() {\n    this.isFilled = false;\n    this.masked.reset();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    if (fromPos === 0 && toPos >= 1) {\n      this.isFilled = false;\n      return this.masked.remove(fromPos, toPos);\n    }\n    return new ChangeDetails();\n  }\n  get value() {\n    return this.masked.value || (this.isFilled && !this.isOptional ? this.placeholderChar : '');\n  }\n  get unmaskedValue() {\n    return this.masked.unmaskedValue;\n  }\n  get rawInputValue() {\n    return this.masked.rawInputValue;\n  }\n  get displayValue() {\n    return this.masked.value && this.displayChar || this.value;\n  }\n  get isComplete() {\n    return Boolean(this.masked.value) || this.isOptional;\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const state = this.masked.state;\n    // simulate input\n    const details = this.masked._appendChar(ch, this.currentMaskFlags(flags));\n    if (details.inserted && this.doValidate(flags) === false) {\n      details.inserted = details.rawInserted = '';\n      this.masked.state = state;\n    }\n    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n      details.inserted = this.placeholderChar;\n    }\n    details.skip = !details.inserted && !this.isOptional;\n    this.isFilled = Boolean(details.inserted);\n    return details;\n  }\n  append(str, flags, tail) {\n    // TODO probably should be done via _appendChar\n    return this.masked.append(str, this.currentMaskFlags(flags), tail);\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled || this.isOptional) return details;\n    this.isFilled = true;\n    details.inserted = this.placeholderChar;\n    return details;\n  }\n  _appendEager() {\n    return new ChangeDetails();\n  }\n  extractTail(fromPos, toPos) {\n    return this.masked.extractTail(fromPos, toPos);\n  }\n  appendTail(tail) {\n    return this.masked.appendTail(tail);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.masked.extractInput(fromPos, toPos, flags);\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this.value.length;\n    const boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return this.isComplete ? boundPos : minPos;\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        return this.isComplete ? boundPos : maxPos;\n      case DIRECTION.NONE:\n      default:\n        return boundPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.value.slice(fromPos, toPos).length;\n  }\n  doValidate(flags) {\n    return this.masked.doValidate(this.currentMaskFlags(flags)) && (!this.parent || this.parent.doValidate(this.currentMaskFlags(flags)));\n  }\n  doCommit() {\n    this.masked.doCommit();\n  }\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue,\n      masked: this.masked.state,\n      isFilled: this.isFilled\n    };\n  }\n  set state(state) {\n    this.masked.state = state.masked;\n    this.isFilled = state.isFilled;\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta;\n    return {\n      ...flags,\n      _beforeTailState: (flags == null || (_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.masked) || (flags == null ? void 0 : flags._beforeTailState)\n    };\n  }\n}\nPatternInputDefinition.DEFAULT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n\nexport { PatternInputDefinition as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by RegExp */\nclass MaskedRegExp extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const mask = opts.mask;\n    if (mask) opts.validate = value => value.search(mask) >= 0;\n    super._update(opts);\n  }\n}\nIMask.MaskedRegExp = MaskedRegExp;\n\nexport { MaskedRegExp as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport { DIRECTION } from '../core/utils.js';\nimport Masked from './base.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\nimport PatternCursor from './pattern/cursor.js';\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\nimport PatternInputDefinition from './pattern/input-definition.js';\nimport './regexp.js';\nimport '../core/continuous-tail-details.js';\n\n/** Pattern mask */\nclass MaskedPattern extends Masked {\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Single char for filled input */\n\n  /** Show placeholder only when needed */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    super({\n      ...MaskedPattern.DEFAULTS,\n      ...opts,\n      definitions: Object.assign({}, PatternInputDefinition.DEFAULT_DEFINITIONS, opts == null ? void 0 : opts.definitions)\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n    super._update(opts);\n    this._rebuildMask();\n  }\n  _rebuildMask() {\n    const defs = this.definitions;\n    this._blocks = [];\n    this.exposeBlock = undefined;\n    this._stops = [];\n    this._maskedBlocks = {};\n    const pattern = this.mask;\n    if (!pattern || !defs) return;\n    let unmaskingBlock = false;\n    let optionalBlock = false;\n    for (let i = 0; i < pattern.length; ++i) {\n      if (this.blocks) {\n        const p = pattern.slice(i);\n        const bNames = Object.keys(this.blocks).filter(bName => p.indexOf(bName) === 0);\n        // order by key length\n        bNames.sort((a, b) => b.length - a.length);\n        // use block name with max length\n        const bName = bNames[0];\n        if (bName) {\n          const {\n            expose,\n            ...blockOpts\n          } = normalizeOpts(this.blocks[bName]);\n          const maskedBlock = createMask({\n            lazy: this.lazy,\n            eager: this.eager,\n            placeholderChar: this.placeholderChar,\n            displayChar: this.displayChar,\n            overwrite: this.overwrite,\n            ...blockOpts,\n            parent: this\n          });\n          if (maskedBlock) {\n            this._blocks.push(maskedBlock);\n            if (expose) this.exposeBlock = maskedBlock;\n\n            // store block index\n            if (!this._maskedBlocks[bName]) this._maskedBlocks[bName] = [];\n            this._maskedBlocks[bName].push(this._blocks.length - 1);\n          }\n          i += bName.length - 1;\n          continue;\n        }\n      }\n      let char = pattern[i];\n      let isInput = (char in defs);\n      if (char === MaskedPattern.STOP_CHAR) {\n        this._stops.push(this._blocks.length);\n        continue;\n      }\n      if (char === '{' || char === '}') {\n        unmaskingBlock = !unmaskingBlock;\n        continue;\n      }\n      if (char === '[' || char === ']') {\n        optionalBlock = !optionalBlock;\n        continue;\n      }\n      if (char === MaskedPattern.ESCAPE_CHAR) {\n        ++i;\n        char = pattern[i];\n        if (!char) break;\n        isInput = false;\n      }\n      const def = isInput ? new PatternInputDefinition({\n        isOptional: optionalBlock,\n        lazy: this.lazy,\n        eager: this.eager,\n        placeholderChar: this.placeholderChar,\n        displayChar: this.displayChar,\n        ...normalizeOpts(defs[char]),\n        parent: this\n      }) : new PatternFixedDefinition({\n        char,\n        eager: this.eager,\n        isUnmasking: unmaskingBlock\n      });\n      this._blocks.push(def);\n    }\n  }\n  get state() {\n    return {\n      ...super.state,\n      _blocks: this._blocks.map(b => b.state)\n    };\n  }\n  set state(state) {\n    const {\n      _blocks,\n      ...maskedState\n    } = state;\n    this._blocks.forEach((b, bi) => b.state = _blocks[bi]);\n    super.state = maskedState;\n  }\n  reset() {\n    super.reset();\n    this._blocks.forEach(b => b.reset());\n  }\n  get isComplete() {\n    return this.exposeBlock ? this.exposeBlock.isComplete : this._blocks.every(b => b.isComplete);\n  }\n  get isFilled() {\n    return this._blocks.every(b => b.isFilled);\n  }\n  get isFixed() {\n    return this._blocks.every(b => b.isFixed);\n  }\n  get isOptional() {\n    return this._blocks.every(b => b.isOptional);\n  }\n  doCommit() {\n    this._blocks.forEach(b => b.doCommit());\n    super.doCommit();\n  }\n  get unmaskedValue() {\n    return this.exposeBlock ? this.exposeBlock.unmaskedValue : this._blocks.reduce((str, b) => str += b.unmaskedValue, '');\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.unmaskedValue = unmaskedValue;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get value() {\n    return this.exposeBlock ? this.exposeBlock.value :\n    // TODO return _value when not in change?\n    this._blocks.reduce((str, b) => str += b.value, '');\n  }\n  set value(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.value = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.value = value;\n  }\n  get typedValue() {\n    return this.exposeBlock ? this.exposeBlock.typedValue : super.typedValue;\n  }\n  set typedValue(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.typedValue = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.typedValue = value;\n  }\n  get displayValue() {\n    return this._blocks.reduce((str, b) => str += b.displayValue, '');\n  }\n  appendTail(tail) {\n    return super.appendTail(tail).aggregate(this._appendPlaceholder());\n  }\n  _appendEager() {\n    var _this$_mapPosToBlock;\n    const details = new ChangeDetails();\n    let startBlockIndex = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index;\n    if (startBlockIndex == null) return details;\n\n    // TODO test if it works for nested pattern masks\n    if (this._blocks[startBlockIndex].isFilled) ++startBlockIndex;\n    for (let bi = startBlockIndex; bi < this._blocks.length; ++bi) {\n      const d = this._blocks[bi]._appendEager();\n      if (!d.inserted) break;\n      details.aggregate(d);\n    }\n    return details;\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const blockIter = this._mapPosToBlock(this.displayValue.length);\n    const details = new ChangeDetails();\n    if (!blockIter) return details;\n    for (let bi = blockIter.index;; ++bi) {\n      var _flags$_beforeTailSta;\n      const block = this._blocks[bi];\n      if (!block) break;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      const skip = blockDetails.skip;\n      details.aggregate(blockDetails);\n      if (skip || blockDetails.rawInserted) break; // go next char\n    }\n\n    return details;\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const chunkTail = new ChunksTailDetails();\n    if (fromPos === toPos) return chunkTail;\n    this._forEachBlocksInRange(fromPos, toPos, (b, bi, bFromPos, bToPos) => {\n      const blockChunk = b.extractTail(bFromPos, bToPos);\n      blockChunk.stop = this._findStopBefore(bi);\n      blockChunk.from = this._blockStartPos(bi);\n      if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n      chunkTail.extend(blockChunk);\n    });\n    return chunkTail;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (fromPos === toPos) return '';\n    let input = '';\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, fromPos, toPos) => {\n      input += b.extractInput(fromPos, toPos, flags);\n    });\n    return input;\n  }\n  _findStopBefore(blockIndex) {\n    let stopBefore;\n    for (let si = 0; si < this._stops.length; ++si) {\n      const stop = this._stops[si];\n      if (stop <= blockIndex) stopBefore = stop;else break;\n    }\n    return stopBefore;\n  }\n\n  /** Appends placeholder depending on laziness */\n  _appendPlaceholder(toBlockIndex) {\n    const details = new ChangeDetails();\n    if (this.lazy && toBlockIndex == null) return details;\n    const startBlockIter = this._mapPosToBlock(this.displayValue.length);\n    if (!startBlockIter) return details;\n    const startBlockIndex = startBlockIter.index;\n    const endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n    this._blocks.slice(startBlockIndex, endBlockIndex).forEach(b => {\n      if (!b.lazy || toBlockIndex != null) {\n        var _blocks2;\n        const bDetails = b._appendPlaceholder((_blocks2 = b._blocks) == null ? void 0 : _blocks2.length);\n        this._value += bDetails.inserted;\n        details.aggregate(bDetails);\n      }\n    });\n    return details;\n  }\n\n  /** Finds block in pos */\n  _mapPosToBlock(pos) {\n    let accVal = '';\n    for (let bi = 0; bi < this._blocks.length; ++bi) {\n      const block = this._blocks[bi];\n      const blockStartPos = accVal.length;\n      accVal += block.displayValue;\n      if (pos <= accVal.length) {\n        return {\n          index: bi,\n          offset: pos - blockStartPos\n        };\n      }\n    }\n  }\n  _blockStartPos(blockIndex) {\n    return this._blocks.slice(0, blockIndex).reduce((pos, b) => pos += b.displayValue.length, 0);\n  }\n  _forEachBlocksInRange(fromPos, toPos, fn) {\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const fromBlockIter = this._mapPosToBlock(fromPos);\n    if (fromBlockIter) {\n      const toBlockIter = this._mapPosToBlock(toPos);\n      // process first block\n      const isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n      const fromBlockStartPos = fromBlockIter.offset;\n      const fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].displayValue.length;\n      fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n      if (toBlockIter && !isSameBlock) {\n        // process intermediate blocks\n        for (let bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n          fn(this._blocks[bi], bi, 0, this._blocks[bi].displayValue.length);\n        }\n\n        // process last block\n        fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n      }\n    }\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      removeDetails.aggregate(b.remove(bFromPos, bToPos));\n    });\n    return removeDetails;\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    if (!this._blocks.length) return 0;\n    const cursor = new PatternCursor(this, cursorPos);\n    if (direction === DIRECTION.NONE) {\n      // -------------------------------------------------\n      // NONE should only go out from fixed to the right!\n      // -------------------------------------------------\n      if (cursor.pushRightBeforeInput()) return cursor.pos;\n      cursor.popState();\n      if (cursor.pushLeftBeforeInput()) return cursor.pos;\n      return this.displayValue.length;\n    }\n\n    // FORCE is only about a|* otherwise is 0\n    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n      // try to break fast when *|a\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeFilled();\n        if (cursor.ok && cursor.pos === cursorPos) return cursorPos;\n        cursor.popState();\n      }\n\n      // forward flow\n      cursor.pushLeftBeforeInput();\n      cursor.pushLeftBeforeRequired();\n      cursor.pushLeftBeforeFilled();\n\n      // backward flow\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeInput();\n        cursor.pushRightBeforeRequired();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n      }\n      if (cursor.ok) return cursor.pos;\n      if (direction === DIRECTION.FORCE_LEFT) return 0;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return 0;\n    }\n    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n      // forward flow\n      cursor.pushRightBeforeInput();\n      cursor.pushRightBeforeRequired();\n      if (cursor.pushRightBeforeFilled()) return cursor.pos;\n      if (direction === DIRECTION.FORCE_RIGHT) return this.displayValue.length;\n\n      // backward flow\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return this.nearestInputPos(cursorPos, DIRECTION.LEFT);\n    }\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    let total = 0;\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      total += b.totalInputPositions(bFromPos, bToPos);\n    });\n    return total;\n  }\n\n  /** Get block by name */\n  maskedBlock(name) {\n    return this.maskedBlocks(name)[0];\n  }\n\n  /** Get all blocks by name */\n  maskedBlocks(name) {\n    const indices = this._maskedBlocks[name];\n    if (!indices) return [];\n    return indices.map(gi => this._blocks[gi]);\n  }\n}\nMaskedPattern.DEFAULTS = {\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\nIMask.MaskedPattern = MaskedPattern;\n\nexport { MaskedPattern as default };\n","import IMask from '../core/holder.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/change-details.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which accepts ranges */\nclass MaskedRange extends MaskedPattern {\n  /**\n    Optionally sets max length of pattern.\n    Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n  */\n\n  /** Min bound */\n\n  /** Max bound */\n\n  /** */\n\n  get _matchFrom() {\n    return this.maxLength - String(this.from).length;\n  }\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      to = this.to || 0,\n      from = this.from || 0,\n      maxLength = this.maxLength || 0,\n      autofix = this.autofix,\n      ...patternOpts\n    } = opts;\n    this.to = to;\n    this.from = from;\n    this.maxLength = Math.max(String(to).length, maxLength);\n    this.autofix = autofix;\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    let sameCharsCount = 0;\n    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) ++sameCharsCount;\n    patternOpts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(this.maxLength - sameCharsCount);\n    super._update(patternOpts);\n  }\n  get isComplete() {\n    return super.isComplete && Boolean(this.value);\n  }\n  boundaries(str) {\n    let minstr = '';\n    let maxstr = '';\n    const [, placeholder, num] = str.match(/^(\\D*)(\\d*)(\\D*)/) || [];\n    if (num) {\n      minstr = '0'.repeat(placeholder.length) + num;\n      maxstr = '9'.repeat(placeholder.length) + num;\n    }\n    minstr = minstr.padEnd(this.maxLength, '0');\n    maxstr = maxstr.padEnd(this.maxLength, '9');\n    return [minstr, maxstr];\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let details;\n    [ch, details] = super.doPrepareChar(ch.replace(/\\D/g, ''), flags);\n    if (!this.autofix || !ch) return [ch, details];\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    const nextVal = this.value + ch;\n    if (nextVal.length > this.maxLength) return ['', details];\n    const [minstr, maxstr] = this.boundaries(nextVal);\n    if (Number(maxstr) < this.from) return [fromStr[nextVal.length - 1], details];\n    if (Number(minstr) > this.to) {\n      if (this.autofix === 'pad' && nextVal.length < this.maxLength) {\n        return ['', details.aggregate(this.append(fromStr[nextVal.length - 1] + ch, flags))];\n      }\n      return [toStr[nextVal.length - 1], details];\n    }\n    return [ch, details];\n  }\n  doValidate(flags) {\n    const str = this.value;\n    const firstNonZero = str.search(/[^0]/);\n    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n    const [minstr, maxstr] = this.boundaries(str);\n    return this.from <= Number(maxstr) && Number(minstr) <= this.to && super.doValidate(flags);\n  }\n}\nIMask.MaskedRange = MaskedRange;\n\nexport { MaskedRange as default };\n","import MaskedPattern from './pattern.js';\nimport MaskedRange from './range.js';\nimport IMask from '../core/holder.js';\nimport { isString } from '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Date mask */\nclass MaskedDate extends MaskedPattern {\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    const {\n      mask,\n      pattern,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    super({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      mask,\n      pattern,\n      blocks,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    const patternBlocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\n    // adjust year block\n    if (opts.min) patternBlocks.Y.from = opts.min.getFullYear();\n    if (opts.max) patternBlocks.Y.to = opts.max.getFullYear();\n    if (opts.min && opts.max && patternBlocks.Y.from === patternBlocks.Y.to) {\n      patternBlocks.m.from = opts.min.getMonth() + 1;\n      patternBlocks.m.to = opts.max.getMonth() + 1;\n      if (patternBlocks.m.from === patternBlocks.m.to) {\n        patternBlocks.d.from = opts.min.getDate();\n        patternBlocks.d.to = opts.max.getDate();\n      }\n    }\n    Object.assign(patternBlocks, this.blocks, blocks);\n\n    // add autofix\n    Object.keys(patternBlocks).forEach(bk => {\n      const b = patternBlocks[bk];\n      if (!('autofix' in b) && 'autofix' in opts) b.autofix = opts.autofix;\n    });\n    super._update({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern,\n      blocks: patternBlocks\n    });\n  }\n  doValidate(flags) {\n    const date = this.date;\n    return super.doValidate(flags) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n  }\n\n  /** Checks if date is exists */\n  isDateExist(str) {\n    return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n  }\n\n  /** Parsed Date */\n  get date() {\n    return this.typedValue;\n  }\n  set date(date) {\n    this.typedValue = date;\n  }\n  get typedValue() {\n    return this.isComplete ? super.typedValue : null;\n  }\n  set typedValue(value) {\n    super.typedValue = value;\n  }\n  maskEquals(mask) {\n    return mask === Date || super.maskEquals(mask);\n  }\n}\nMaskedDate.GET_DEFAULT_BLOCKS = () => ({\n  d: {\n    mask: MaskedRange,\n    from: 1,\n    to: 31,\n    maxLength: 2\n  },\n  m: {\n    mask: MaskedRange,\n    from: 1,\n    to: 12,\n    maxLength: 2\n  },\n  Y: {\n    mask: MaskedRange,\n    from: 1900,\n    to: 9999\n  }\n});\nMaskedDate.DEFAULTS = {\n  mask: Date,\n  pattern: 'd{.}`m{.}`Y',\n  format: (date, masked) => {\n    if (!date) return '';\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: (str, masked) => {\n    const [day, month, year] = str.split('.').map(Number);\n    return new Date(year, month - 1, day);\n  }\n};\nIMask.MaskedDate = MaskedDate;\n\nexport { MaskedDate as default };\n","import { DIRECTION, objectIncludes } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Dynamic mask for choosing appropriate mask in run-time */\nclass MaskedDynamic extends Masked {\n  /** Currently chosen mask */\n\n  /** Currently chosen mask */\n\n  /** Compliled {@link Masked} options */\n\n  /** Chooses {@link Masked} depending on input value */\n\n  constructor(opts) {\n    super({\n      ...MaskedDynamic.DEFAULTS,\n      ...opts\n    });\n    this.currentMask = undefined;\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    if ('mask' in opts) {\n      this.exposeMask = undefined;\n      // mask could be totally dynamic with only `dispatch` option\n      this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(m => {\n        const {\n          expose,\n          ...maskOpts\n        } = normalizeOpts(m);\n        const masked = createMask({\n          overwrite: this._overwrite,\n          eager: this._eager,\n          skipInvalid: this._skipInvalid,\n          ...maskOpts\n        });\n        if (expose) this.exposeMask = masked;\n        return masked;\n      }) : [];\n\n      // this.currentMask = this.doDispatch(''); // probably not needed but lets see\n    }\n  }\n\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = this._applyDispatch(ch, flags);\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendChar(ch, this.currentMaskFlags(flags)));\n    }\n    return details;\n  }\n  _applyDispatch(appended, flags, tail) {\n    if (appended === void 0) {\n      appended = '';\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    const prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n    const inputValue = this.rawInputValue;\n    const insertValue = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._rawInputValue : inputValue;\n    const tailValue = inputValue.slice(insertValue.length);\n    const prevMask = this.currentMask;\n    const details = new ChangeDetails();\n    const prevMaskState = prevMask == null ? void 0 : prevMask.state;\n\n    // clone flags to prevent overwriting `_beforeTailState`\n    this.currentMask = this.doDispatch(appended, {\n      ...flags\n    }, tail);\n\n    // restore state after dispatch\n    if (this.currentMask) {\n      if (this.currentMask !== prevMask) {\n        // if mask changed reapply input\n        this.currentMask.reset();\n        if (insertValue) {\n          const d = this.currentMask.append(insertValue, {\n            raw: true\n          });\n          details.tailShift = d.inserted.length - prevValueBeforeTail.length;\n        }\n        if (tailValue) {\n          details.tailShift += this.currentMask.append(tailValue, {\n            raw: true,\n            tail: true\n          }).tailShift;\n        }\n      } else if (prevMaskState) {\n        // Dispatch can do something bad with state, so\n        // restore prev mask state\n        this.currentMask.state = prevMaskState;\n      }\n    }\n    return details;\n  }\n  _appendPlaceholder() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendPlaceholder());\n    }\n    return details;\n  }\n  _appendEager() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendEager());\n    }\n    return details;\n  }\n  appendTail(tail) {\n    const details = new ChangeDetails();\n    if (tail) details.aggregate(this._applyDispatch('', {}, tail));\n    return details.aggregate(this.currentMask ? this.currentMask.appendTail(tail) : super.appendTail(tail));\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta, _flags$_beforeTailSta2;\n    return {\n      ...flags,\n      _beforeTailState: ((_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.currentMaskRef) === this.currentMask && ((_flags$_beforeTailSta2 = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta2.currentMask) || flags._beforeTailState\n    };\n  }\n  doDispatch(appended, flags, tail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    return this.dispatch(appended, this, flags, tail);\n  }\n  doValidate(flags) {\n    return super.doValidate(flags) && (!this.currentMask || this.currentMask.doValidate(this.currentMaskFlags(flags)));\n  }\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepare(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepare(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepareChar(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepareChar(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  reset() {\n    var _this$currentMask;\n    (_this$currentMask = this.currentMask) == null ? void 0 : _this$currentMask.reset();\n    this.compiledMasks.forEach(m => m.reset());\n  }\n  get value() {\n    return this.exposeMask ? this.exposeMask.value : this.currentMask ? this.currentMask.value : '';\n  }\n  set value(value) {\n    if (this.exposeMask) {\n      this.exposeMask.value = value;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.value = value;\n  }\n  get unmaskedValue() {\n    return this.exposeMask ? this.exposeMask.unmaskedValue : this.currentMask ? this.currentMask.unmaskedValue : '';\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.unmaskedValue = unmaskedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.exposeMask ? this.exposeMask.typedValue : this.currentMask ? this.currentMask.typedValue : '';\n  }\n  set typedValue(typedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.typedValue = typedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n      return;\n    }\n    let unmaskedValue = String(typedValue);\n\n    // double check it\n    if (this.currentMask) {\n      this.currentMask.typedValue = typedValue;\n      unmaskedValue = this.currentMask.unmaskedValue;\n    }\n    this.unmaskedValue = unmaskedValue;\n  }\n  get displayValue() {\n    return this.currentMask ? this.currentMask.displayValue : '';\n  }\n  get isComplete() {\n    var _this$currentMask2;\n    return Boolean((_this$currentMask2 = this.currentMask) == null ? void 0 : _this$currentMask2.isComplete);\n  }\n  get isFilled() {\n    var _this$currentMask3;\n    return Boolean((_this$currentMask3 = this.currentMask) == null ? void 0 : _this$currentMask3.isFilled);\n  }\n  remove(fromPos, toPos) {\n    const details = new ChangeDetails();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask.remove(fromPos, toPos))\n      // update with dispatch\n      .aggregate(this._applyDispatch());\n    }\n    return details;\n  }\n  get state() {\n    var _this$currentMask4;\n    return {\n      ...super.state,\n      _rawInputValue: this.rawInputValue,\n      compiledMasks: this.compiledMasks.map(m => m.state),\n      currentMaskRef: this.currentMask,\n      currentMask: (_this$currentMask4 = this.currentMask) == null ? void 0 : _this$currentMask4.state\n    };\n  }\n  set state(state) {\n    const {\n      compiledMasks,\n      currentMaskRef,\n      currentMask,\n      ...maskedState\n    } = state;\n    if (compiledMasks) this.compiledMasks.forEach((m, mi) => m.state = compiledMasks[mi]);\n    if (currentMaskRef != null) {\n      this.currentMask = currentMaskRef;\n      this.currentMask.state = currentMask;\n    }\n    super.state = maskedState;\n  }\n  extractInput(fromPos, toPos, flags) {\n    return this.currentMask ? this.currentMask.extractInput(fromPos, toPos, flags) : '';\n  }\n  extractTail(fromPos, toPos) {\n    return this.currentMask ? this.currentMask.extractTail(fromPos, toPos) : super.extractTail(fromPos, toPos);\n  }\n  doCommit() {\n    if (this.currentMask) this.currentMask.doCommit();\n    super.doCommit();\n  }\n  nearestInputPos(cursorPos, direction) {\n    return this.currentMask ? this.currentMask.nearestInputPos(cursorPos, direction) : super.nearestInputPos(cursorPos, direction);\n  }\n  get overwrite() {\n    return this.currentMask ? this.currentMask.overwrite : this._overwrite;\n  }\n  set overwrite(overwrite) {\n    this._overwrite = overwrite;\n  }\n  get eager() {\n    return this.currentMask ? this.currentMask.eager : this._eager;\n  }\n  set eager(eager) {\n    this._eager = eager;\n  }\n  get skipInvalid() {\n    return this.currentMask ? this.currentMask.skipInvalid : this._skipInvalid;\n  }\n  set skipInvalid(skipInvalid) {\n    this._skipInvalid = skipInvalid;\n  }\n  maskEquals(mask) {\n    return Array.isArray(mask) ? this.compiledMasks.every((m, mi) => {\n      if (!mask[mi]) return;\n      const {\n        mask: oldMask,\n        ...restOpts\n      } = mask[mi];\n      return objectIncludes(m, restOpts) && m.maskEquals(oldMask);\n    }) : super.maskEquals(mask);\n  }\n  typedValueEquals(value) {\n    var _this$currentMask5;\n    return Boolean((_this$currentMask5 = this.currentMask) == null ? void 0 : _this$currentMask5.typedValueEquals(value));\n  }\n}\nMaskedDynamic.DEFAULTS = void 0;\nMaskedDynamic.DEFAULTS = {\n  dispatch: (appended, masked, flags, tail) => {\n    if (!masked.compiledMasks.length) return;\n    const inputValue = masked.rawInputValue;\n\n    // simulate input\n    const inputs = masked.compiledMasks.map((m, index) => {\n      const isCurrent = masked.currentMask === m;\n      const startInputPos = isCurrent ? m.displayValue.length : m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT);\n      if (m.rawInputValue !== inputValue) {\n        m.reset();\n        m.append(inputValue, {\n          raw: true\n        });\n      } else if (!isCurrent) {\n        m.remove(startInputPos);\n      }\n      m.append(appended, masked.currentMaskFlags(flags));\n      m.appendTail(tail);\n      return {\n        index,\n        weight: m.rawInputValue.length,\n        totalInputPositions: m.totalInputPositions(0, Math.max(startInputPos, m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT)))\n      };\n    });\n\n    // pop masks with longer values first\n    inputs.sort((i1, i2) => i2.weight - i1.weight || i2.totalInputPositions - i1.totalInputPositions);\n    return masked.compiledMasks[inputs[0].index];\n  }\n};\nIMask.MaskedDynamic = MaskedDynamic;\n\nexport { MaskedDynamic as default };\n","import MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which validates enum values */\nclass MaskedEnum extends MaskedPattern {\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      enum: _enum,\n      ...eopts\n    } = opts;\n    if (_enum) {\n      const lengths = _enum.map(e => e.length);\n      const requiredLength = Math.min(...lengths);\n      const optionalLength = Math.max(...lengths) - requiredLength;\n      eopts.mask = '*'.repeat(requiredLength);\n      if (optionalLength) eopts.mask += '[' + '*'.repeat(optionalLength) + ']';\n      this.enum = _enum;\n    }\n    super._update(eopts);\n  }\n  doValidate(flags) {\n    return this.enum.some(e => e.indexOf(this.unmaskedValue) === 0) && super.doValidate(flags);\n  }\n}\nIMask.MaskedEnum = MaskedEnum;\n\nexport { MaskedEnum as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by custom Function */\nclass MaskedFunction extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update({\n      ...opts,\n      validate: opts.mask\n    });\n  }\n}\nIMask.MaskedFunction = MaskedFunction;\n\nexport { MaskedFunction as default };\n","import { escapeRegExp, DIRECTION } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Number mask */\nclass MaskedNumber extends Masked {\n  /** Single char */\n\n  /** Single char */\n\n  /** Array of single chars */\n\n  /** */\n\n  /** */\n\n  /** Digits after point */\n\n  /** Flag to remove leading and trailing zeros in the end of editing */\n\n  /** Flag to pad trailing zeros after point in the end of editing */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super({\n      ...MaskedNumber.DEFAULTS,\n      ...opts\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    this._updateRegExps();\n  }\n  _updateRegExps() {\n    const start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n    const mid = '\\\\d*';\n    const end = (this.scale ? \"(\" + escapeRegExp(this.radix) + \"\\\\d{0,\" + this.scale + \"})?\" : '') + '$';\n    this._numberRegExp = new RegExp(start + mid + end);\n    this._mapToRadixRegExp = new RegExp(\"[\" + this.mapToRadix.map(escapeRegExp).join('') + \"]\", 'g');\n    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n  }\n  _removeThousandsSeparators(value) {\n    return value.replace(this._thousandsSeparatorRegExp, '');\n  }\n  _insertThousandsSeparators(value) {\n    // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n    const parts = value.split(this.radix);\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n    return parts.join(this.radix);\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const [prepCh, details] = super.doPrepareChar(this._removeThousandsSeparators(this.scale && this.mapToRadix.length && (\n    /*\n      radix should be mapped when\n      1) input is done from keyboard = flags.input && flags.raw\n      2) unmasked value is set = !flags.input && !flags.raw\n      and should not be mapped when\n      1) value is set = flags.input && !flags.raw\n      2) raw value is set = !flags.input && flags.raw\n    */\n    flags.input && flags.raw || !flags.input && !flags.raw) ? ch.replace(this._mapToRadixRegExp, this.radix) : ch), flags);\n    if (ch && !prepCh) details.skip = true;\n    if (prepCh && !this.allowPositive && !this.value && prepCh !== '-') details.aggregate(this._appendChar('-'));\n    return [prepCh, details];\n  }\n  _separatorsCount(to, extendOnSeparators) {\n    if (extendOnSeparators === void 0) {\n      extendOnSeparators = false;\n    }\n    let count = 0;\n    for (let pos = 0; pos < to; ++pos) {\n      if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n        ++count;\n        if (extendOnSeparators) to += this.thousandsSeparator.length;\n      }\n    }\n    return count;\n  }\n  _separatorsCountFromSlice(slice) {\n    if (slice === void 0) {\n      slice = this._value;\n    }\n    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    return this._removeThousandsSeparators(super.extractInput(fromPos, toPos, flags));\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (!this.thousandsSeparator) return super._appendCharRaw(ch, flags);\n    const prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n    this._value = this._removeThousandsSeparators(this.value);\n    const appendDetails = super._appendCharRaw(ch, flags);\n    this._value = this._insertThousandsSeparators(this._value);\n    const beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n    appendDetails.skip = !appendDetails.rawInserted && ch === this.thousandsSeparator;\n    return appendDetails;\n  }\n  _findSeparatorAround(pos) {\n    if (this.thousandsSeparator) {\n      const searchFrom = pos - this.thousandsSeparator.length + 1;\n      const separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n      if (separatorPos <= pos) return separatorPos;\n    }\n    return -1;\n  }\n  _adjustRangeWithSeparators(from, to) {\n    const separatorAroundFromPos = this._findSeparatorAround(from);\n    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n    const separatorAroundToPos = this._findSeparatorAround(to);\n    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n    return [from, to];\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    const valueBeforePos = this.value.slice(0, fromPos);\n    const valueAfterPos = this.value.slice(toPos);\n    const prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n    return new ChangeDetails({\n      tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n    });\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (!this.thousandsSeparator) return cursorPos;\n    switch (direction) {\n      case DIRECTION.NONE:\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        {\n          const separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n          if (separatorAtLeftPos >= 0) {\n            const separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n            if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n              return separatorAtLeftPos;\n            }\n          }\n          break;\n        }\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        {\n          const separatorAtRightPos = this._findSeparatorAround(cursorPos);\n          if (separatorAtRightPos >= 0) {\n            return separatorAtRightPos + this.thousandsSeparator.length;\n          }\n        }\n    }\n    return cursorPos;\n  }\n  doValidate(flags) {\n    // validate as string\n    let valid = Boolean(this._removeThousandsSeparators(this.value).match(this._numberRegExp));\n    if (valid) {\n      // validate as number\n      const number = this.number;\n      valid = valid && !isNaN(number) && (\n      // check min bound for negative values\n      this.min == null || this.min >= 0 || this.min <= this.number) && (\n      // check max bound for positive values\n      this.max == null || this.max <= 0 || this.number <= this.max);\n    }\n    return valid && super.doValidate(flags);\n  }\n  doCommit() {\n    if (this.value) {\n      const number = this.number;\n      let validnum = number;\n\n      // check bounds\n      if (this.min != null) validnum = Math.max(validnum, this.min);\n      if (this.max != null) validnum = Math.min(validnum, this.max);\n      if (validnum !== number) this.unmaskedValue = this.format(validnum, this);\n      let formatted = this.value;\n      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n      if (this.padFractionalZeros && this.scale > 0) formatted = this._padFractionalZeros(formatted);\n      this._value = formatted;\n    }\n    super.doCommit();\n  }\n  _normalizeZeros(value) {\n    const parts = this._removeThousandsSeparators(value).split(this.radix);\n\n    // remove leading zeros\n    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, (match, sign, zeros, num) => sign + num);\n    // add leading zero\n    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n    if (parts.length > 1) {\n      parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n      if (!parts[1].length) parts.length = 1; // remove fractional\n    }\n\n    return this._insertThousandsSeparators(parts.join(this.radix));\n  }\n  _padFractionalZeros(value) {\n    if (!value) return value;\n    const parts = value.split(this.radix);\n    if (parts.length < 2) parts.push('');\n    parts[1] = parts[1].padEnd(this.scale, '0');\n    return parts.join(this.radix);\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const dropFractional = this.scale === 0 && ch !== this.thousandsSeparator && (ch === this.radix || ch === MaskedNumber.UNMASKED_RADIX || this.mapToRadix.includes(ch));\n    return super.doSkipInvalid(ch, flags, checkTail) && !dropFractional;\n  }\n  get unmaskedValue() {\n    return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, MaskedNumber.UNMASKED_RADIX);\n  }\n  set unmaskedValue(unmaskedValue) {\n    super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.parse(this.unmaskedValue, this);\n  }\n  set typedValue(n) {\n    this.rawInputValue = this.format(n, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n  }\n\n  /** Parsed Number */\n  get number() {\n    return this.typedValue;\n  }\n  set number(number) {\n    this.typedValue = number;\n  }\n\n  /**\n    Is negative allowed\n  */\n  get allowNegative() {\n    return this.min != null && this.min < 0 || this.max != null && this.max < 0;\n  }\n\n  /**\n    Is positive allowed\n  */\n  get allowPositive() {\n    return this.min != null && this.min > 0 || this.max != null && this.max > 0;\n  }\n  typedValueEquals(value) {\n    // handle  0 -> '' case (typed = 0 even if value = '')\n    // for details see https://github.com/uNmAnNeR/imaskjs/issues/134\n    return (super.typedValueEquals(value) || MaskedNumber.EMPTY_VALUES.includes(value) && MaskedNumber.EMPTY_VALUES.includes(this.typedValue)) && !(value === 0 && this.value === '');\n  }\n}\nMaskedNumber.UNMASKED_RADIX = '.';\nMaskedNumber.EMPTY_VALUES = [...Masked.EMPTY_VALUES, 0];\nMaskedNumber.DEFAULTS = {\n  mask: Number,\n  radix: ',',\n  thousandsSeparator: '',\n  mapToRadix: [MaskedNumber.UNMASKED_RADIX],\n  min: Number.MIN_SAFE_INTEGER,\n  max: Number.MAX_SAFE_INTEGER,\n  scale: 2,\n  normalizeZeros: true,\n  padFractionalZeros: false,\n  parse: Number,\n  format: n => n.toLocaleString('en-US', {\n    useGrouping: false,\n    maximumFractionDigits: 20\n  })\n};\nIMask.MaskedNumber = MaskedNumber;\n\nexport { MaskedNumber as default };\n","import createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\n\n/** Mask pipe source and destination types */\nconst PIPE_TYPE = {\n  MASKED: 'value',\n  UNMASKED: 'unmaskedValue',\n  TYPED: 'typedValue'\n};\n/** Creates new pipe function depending on mask type, source and destination options */\nfunction createPipe(arg, from, to) {\n  if (from === void 0) {\n    from = PIPE_TYPE.MASKED;\n  }\n  if (to === void 0) {\n    to = PIPE_TYPE.MASKED;\n  }\n  const masked = createMask(arg);\n  return value => masked.runIsolated(m => {\n    m[from] = value;\n    return m[to];\n  });\n}\n\n/** Pipes value through mask depending on mask type, source and destination options */\nfunction pipe(value, mask, from, to) {\n  return createPipe(mask, from, to)(value);\n}\nIMask.PIPE_TYPE = PIPE_TYPE;\nIMask.createPipe = createPipe;\nIMask.pipe = pipe;\n\nexport { PIPE_TYPE, createPipe, pipe };\n","export { default as InputMask } from './controls/input.js';\nimport IMask from './core/holder.js';\nexport { default as HTMLContenteditableMaskElement } from './controls/html-contenteditable-mask-element.js';\nexport { default as HTMLInputMaskElement } from './controls/html-input-mask-element.js';\nexport { default as HTMLMaskElement } from './controls/html-mask-element.js';\nexport { default as MaskElement } from './controls/mask-element.js';\nexport { default as ChangeDetails } from './core/change-details.js';\nexport { DIRECTION, forceDirection } from './core/utils.js';\nexport { default as Masked } from './masked/base.js';\nexport { default as MaskedDate } from './masked/date.js';\nexport { default as MaskedDynamic } from './masked/dynamic.js';\nexport { default as MaskedEnum } from './masked/enum.js';\nexport { default as createMask, normalizeOpts } from './masked/factory.js';\nexport { default as MaskedFunction } from './masked/function.js';\nexport { default as MaskedNumber } from './masked/number.js';\nexport { default as MaskedPattern } from './masked/pattern.js';\nexport { default as ChunksTailDetails } from './masked/pattern/chunk-tail-details.js';\nexport { default as PatternFixedDefinition } from './masked/pattern/fixed-definition.js';\nexport { default as PatternInputDefinition } from './masked/pattern/input-definition.js';\nexport { PIPE_TYPE, createPipe, pipe } from './masked/pipe.js';\nexport { default as MaskedRange } from './masked/range.js';\nexport { default as MaskedRegExp } from './masked/regexp.js';\nimport './core/action-details.js';\nimport './core/continuous-tail-details.js';\nimport './masked/pattern/cursor.js';\n\ntry {\n  globalThis.IMask = IMask;\n} catch {}\n\nexport { IMask as default };\n","import { getThemedColors } from './';\nexport const getThemedFormStateColors = (theme, state) => {\n    const themedColors = getThemedColors(theme);\n    return {\n        formStateColor: themedColors[`${state}Color`],\n        formStateHoverColor: themedColors[`${state}ColorDarken`],\n    };\n};\n","import { getThemedColors, getTransition, hoverMediaQuery, prefersColorSchemeDarkMediaQuery } from './';\nimport { borderRadiusSmall, borderWidthBase, fontLineHeight, spacingStaticMedium, spacingStaticSmall, spacingStaticXSmall, textSmallStyle, } from '@porsche-design-system/styles';\nimport { getThemedFormStateColors } from './form-state-color-styles';\nexport const getSlottedTextFieldTextareaSelectStyles = (child, state, isLoading, theme, additionalDefaultJssStyle) => {\n    const { primaryColor, contrastLowColor, contrastMediumColor, disabledColor } = getThemedColors(theme);\n    const { primaryColor: primaryColorDark, contrastLowColor: contrastLowColorDark, contrastMediumColor: contrastMediumColorDark, disabledColor: disabledColorDark, } = getThemedColors('dark');\n    const { formStateColor, formStateHoverColor } = getThemedFormStateColors(theme, state);\n    const { formStateColor: formStateColorDark, formStateHoverColor: formStateHoverColorDark } = getThemedFormStateColors('dark', state);\n    return {\n        [`::slotted(${child})`]: {\n            display: 'block',\n            width: '100%',\n            height: child !== 'textarea'\n                ? `calc(${fontLineHeight} + 10px + ${borderWidthBase} * 2 + ${spacingStaticSmall} * 2)` // we need 10px additionally so input height becomes 54px\n                : 'auto',\n            margin: 0,\n            outline: 0,\n            WebkitAppearance: 'none', // iOS safari\n            appearance: 'none',\n            boxSizing: 'border-box',\n            border: `${borderWidthBase} solid ${formStateColor || contrastMediumColor}`,\n            borderRadius: borderRadiusSmall,\n            background: 'transparent',\n            font: textSmallStyle.font.replace('ex', 'ex + 6px'), // a minimum line-height is needed for input, otherwise value is scrollable in Chrome, +6px is aligned with how Safari visualize date/time input highlighting\n            textIndent: 0,\n            color: primaryColor,\n            transition: `${getTransition('background-color')}, ${getTransition('border-color')}, ${getTransition('color')}`, // for smooth transitions between e.g. disabled states\n            ...prefersColorSchemeDarkMediaQuery(theme, {\n                borderColor: formStateColorDark || contrastMediumColorDark,\n                color: primaryColorDark,\n            }),\n            ...additionalDefaultJssStyle,\n        },\n        ...(!isLoading &&\n            hoverMediaQuery({\n                // with the media query the selector has higher priority and overrides disabled styles\n                [`::slotted(${child}:not(:disabled):not(:focus):not([readonly]):hover),label:hover~.wrapper ::slotted(${child}:not(:disabled):not(:focus):not([readonly]))${child === 'select' ? ',label:hover~.wrapper ::part(select-wrapper-dropdown)' : ''}`]: {\n                    borderColor: formStateHoverColor || primaryColor,\n                    ...prefersColorSchemeDarkMediaQuery(theme, {\n                        borderColor: formStateHoverColorDark || primaryColorDark,\n                    }),\n                },\n            })),\n        // TODO: getFocusJssStyle() can't be re-used because focus style differs for form elements\n        [`::slotted(${child}:focus)`]: {\n            borderColor: primaryColor,\n            ...prefersColorSchemeDarkMediaQuery(theme, {\n                borderColor: primaryColorDark,\n            }),\n        },\n        [`::slotted(${child}:disabled)`]: {\n            cursor: 'not-allowed',\n            color: disabledColor,\n            borderColor: disabledColor,\n            WebkitTextFillColor: disabledColor,\n            ...prefersColorSchemeDarkMediaQuery(theme, {\n                color: disabledColorDark,\n                borderColor: disabledColorDark,\n                WebkitTextFillColor: disabledColorDark,\n            }),\n        },\n        ...(child !== 'select' && {\n            [`::slotted(${child}[readonly])`]: {\n                borderColor: contrastLowColor,\n                background: contrastLowColor,\n                ...prefersColorSchemeDarkMediaQuery(theme, {\n                    borderColor: contrastLowColorDark,\n                    background: contrastLowColorDark,\n                }),\n            },\n        }),\n    };\n};\nexport const formElementLayeredGap = '9px'; // to have same distance vertically and horizontally for e.g. button/icon within form element\nexport const formElementLayeredSafeZone = `calc(${formElementLayeredGap} + ${borderWidthBase})`;\n// TODO: basic button/icon padding can already be set within style function instead of on component style level\nexport const formButtonOrIconPadding = spacingStaticXSmall;\n// TODO: if we'd use 12px instead, it wouldn't be necessary for textarea to have a custom vertical padding,\n//  unfortunately line-height alignment breaks for a select element for some reasons then\n// TODO: basic form element padding can already be set within style function instead of on component style level\nexport const formElementPaddingVertical = spacingStaticSmall;\n// TODO: basic form element padding can already be set within style function instead of on component style level\nexport const formElementPaddingHorizontal = spacingStaticMedium;\nexport const getCalculatedFormElementPaddingHorizontal = (buttonOrIconAmount) => {\n    // when applied, font-family and font-size needs to be set too for correct calculation of ex-unit ($fontLineHeight)\n    return `calc(${formElementLayeredGap} + ${formElementPaddingHorizontal} / 2 + (${fontLineHeight} + ${formButtonOrIconPadding} * 2) * ${buttonOrIconAmount})`;\n};\n// TODO: re-use in textarea-wrapper not only in text-field-wrapper\nexport const getUnitCounterJssStyle = (isDisabled, theme) => {\n    const { disabledColor, contrastMediumColor } = getThemedColors(theme);\n    const { disabledColor: disabledColorDark, contrastMediumColor: contrastMediumColorDark } = getThemedColors('dark');\n    return {\n        pointerEvents: 'none',\n        maxWidth: '100%',\n        boxSizing: 'border-box',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        font: textSmallStyle.font,\n        color: contrastMediumColor,\n        ...prefersColorSchemeDarkMediaQuery(theme, {\n            color: contrastMediumColorDark,\n        }),\n        ...(isDisabled && {\n            color: disabledColor,\n            ...prefersColorSchemeDarkMediaQuery(theme, {\n                color: disabledColorDark,\n            }),\n        }),\n    };\n};\n","export const getFunctionalComponentRequiredStyles = () => {\n    return {\n        required: {\n            userSelect: 'none',\n        },\n    };\n};\n","import { hasCounter, hasDocument, throwException } from '../../utils';\nimport { borderWidthBase } from '@porsche-design-system/styles';\nimport { cssVariableInputPaddingStart, cssVariableInputPaddingEnd } from './text-field-wrapper-styles';\nexport const UNIT_POSITIONS = ['prefix', 'suffix'];\nexport const hasCounterAndIsTypeText = (el) => el && isType(el.type, 'text') && hasCounter(el);\nexport const hasUnitAndIsTypeTextOrNumber = (el, unit) => {\n    return el && !!unit && (isType(el.type, 'text') || isType(el.type, 'number'));\n};\nexport const isType = (inputType, typeToValidate) => inputType === typeToValidate;\nexport const hasLocateAction = (icon) => icon === 'locate';\nexport const getInputPaddingLeftOrRight = (unitElementWidth) => {\n    return `calc(${unitElementWidth}px - ${borderWidthBase})`;\n};\nexport const setInputStyles = (input, unitOrCounterElement, unitPosition) => {\n    if (unitOrCounterElement) {\n        input.style.removeProperty(cssVariableInputPaddingStart);\n        input.style.removeProperty(cssVariableInputPaddingEnd);\n        input.style.setProperty(unitPosition === 'prefix' ? cssVariableInputPaddingStart : cssVariableInputPaddingEnd, getInputPaddingLeftOrRight(unitOrCounterElement.offsetWidth), // in case fonts are not loaded, this value is wrong\n        'important');\n    }\n};\nexport const throwIfUnitLengthExceeded = (unit) => {\n    if (unit.length > 5) {\n        throwException(`unit='${unit}' passed to p-text-field-wrapper exceeds the maximum length of 5.`);\n    }\n};\nexport const addInputEventListenerForSearch = (input, inputChangeCallback) => {\n    input.addEventListener('input', (e) => {\n        inputChangeCallback(!!e.target.value);\n    });\n    input.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && e.target.value) {\n            e.preventDefault();\n            e.target.value = '';\n            // need to emit event so consumer's change listeners fire for resetting a search, etc.\n            dispatchInputEvent(e.target);\n        }\n    });\n};\nexport const dispatchInputEvent = (el) => {\n    // { bubbles: true } is crucial for react onChange callback getting invoked\n    el.dispatchEvent(new Event('input', { bubbles: true }));\n};\n// eslint-disable-next-line no-underscore-dangle\nexport const _hasShowPickerSupport = () => {\n    return (hasDocument &&\n        'showPicker' in HTMLInputElement.prototype &&\n        // TODO: it would be better to determinate support by checking for existence of \"calendar-picker-indicator\"\n        !!window.navigator.userAgent.match(/chrome|chromium|crios|edg/i));\n};\nconst hasShowPickerSupport = _hasShowPickerSupport();\nexport const showCustomCalendarOrTimeIndicator = (isCalendar, isTime) => {\n    return hasShowPickerSupport && (isCalendar || isTime);\n};\n","import mod from \"-!../../../../storefront/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../storefront/node_modules/thread-loader/dist/cjs.js!../../../../storefront/node_modules/babel-loader/lib/index.js!../../../../storefront/node_modules/ts-loader/index.js??ref--14-3!../../../../storefront/node_modules/vue-loader/lib/index.js!../../../../../node_modules/vmark-loader/index.js!./text-field-wrapper.examples.md?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../storefront/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../storefront/node_modules/thread-loader/dist/cjs.js!../../../../storefront/node_modules/babel-loader/lib/index.js!../../../../storefront/node_modules/ts-loader/index.js??ref--14-3!../../../../storefront/node_modules/vue-loader/lib/index.js!../../../../../node_modules/vmark-loader/index.js!./text-field-wrapper.examples.md?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./text-field-wrapper.examples.md?vue&type=template&id=2df57a11\"\nimport script from \"./text-field-wrapper.examples.md?vue&type=script&lang=ts\"\nexport * from \"./text-field-wrapper.examples.md?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../storefront/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const fontHyphenationStyle = {\n    overflowWrap: 'break-word',\n    hyphens: 'auto',\n};\n\nexport { fontHyphenationStyle };\n","const fontSizeTextXSmall = 'clamp(0.81rem, 0.23vw + 0.77rem, 0.88rem)';\n\nexport { fontSizeTextXSmall };\n","const fontWeightRegular = 400;\n\nexport { fontWeightRegular };\n","import { fontFamily } from '../../font/fontFamily.mjs';\nimport { fontLineHeight } from '../../font/fontLineHeight.mjs';\nimport { fontWeightRegular } from '../../font/fontWeightRegular.mjs';\nimport { fontStyleNormal } from '../../font/fontStyleNormal.mjs';\nimport { fontVariant } from '../../font/fontVariant.mjs';\n\nconst _textFontPartA = `${fontStyleNormal} ${fontVariant} ${fontWeightRegular} `;\nconst _textFontPartB = `/${fontLineHeight} ${fontFamily}`;\n\nexport { _textFontPartA, _textFontPartB };\n","const fontStyleNormal = 'normal';\n\nexport { fontStyleNormal };\n","const fontFamily = \"'Porsche Next','Arial Narrow',Arial,'Heiti SC',SimHei,sans-serif\";\n\nexport { fontFamily };\n"],"sourceRoot":""}