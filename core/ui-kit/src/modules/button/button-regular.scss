@import 'button-regular.setup.scss';
@import '../../base/font/font.mixin.scss';
@import '../../base/text-size/text-size.mixin.scss';
@import '../../base/layout/flex.mixin.scss';
@import '../../base/align/align.mixin.scss';
@import '../../base/spacing/spacing.mixin.scss';
@import '../../setup/global-variables.scss';
@import '../../setup/animations.scss';
@import '../../mixins/breakpoint.scss';

// @mixin not($ignore) {
//   @if (length($ignore) == 1) {
//     $ignore: nth($ignore, 1);
//   }
//   $not-output: '';
//   @each $not in $ignore {
//     $not-output: $not-output + ':not(#{$not})';
//   }

//   &#{$not-output} {
//     @content;
//   }
// }

.#{$global-class-prefix}button-regular {
  $bem-block: &;

  @include flex-inline;
  @include -align-left;
  @include -text-size-copy;
  @include -spacing-12(top, padding);
  @include -spacing-12(bottom, padding);
  padding-left: rem(17px); // 17px width because of 1 px border which leads to 18px
  padding-right: rem(17px);
  position: relative;
  width: $button-regular-width;
  max-width: 100%; // fix for IE11, forces using multi line label
  border-radius: 0; // fix for Chrome and Safari
  appearance: none;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  background-color: $button-regular-background-color;
  border: $button-regular-border-size solid $button-regular-border-color;
  color: $button-regular-text-color;
  transition: background-color $animation-hover-duration $animation-hover-bezier, border-color $animation-hover-duration $animation-hover-bezier, color $animation-hover-duration $animation-hover-bezier; // must be globally defined

  &::-moz-focus-inner { // sass-lint:disable-line no-vendor-prefixes
    border: 0; // fix for Firefox, avoid dotted outline in button on focus
  }

  // $ignored-items: #{$bem-block}--highlight, #{$bem-block}--sales;

  &--theme-inverted {
    // @include not($ignored-items) {
    background-color: $button-regular-background-color-inverted;
    border-color: $button-regular-border-color-inverted;
    color: $button-regular-text-color-inverted;
    // }
  }

  &:not([disabled]) {
    &:hover,
    &:focus,
    &:active {
      background-color: $button-regular-background-color-hover;
      border-color: $button-regular-border-color-hover;
      text-decoration: none;

      &#{$bem-block}--theme-inverted {
        // @include not($ignored-items) {
        background-color: $button-regular-background-color-inverted-hover;
        border-color: $button-regular-border-color-inverted-hover;
        // }
      }
    }
  }

  &[disabled] {
    cursor: default;
    pointer-events: none;
    background-color: $button-regular-background-color-disabled;
    border-color: $button-regular-border-color-disabled;

    #{$bem-block}__icon {
      opacity: .55;
    }

    #{$bem-block}__label {
      opacity: .55;
    }

    &#{$bem-block}--theme-inverted {
      color: $button-regular-text-color-inverted-disabled;
      background-color: $button-regular-background-color-inverted-disabled;
      border-color: $button-regular-border-color-inverted-disabled;

      #{$bem-block}__icon {
        opacity: .35;
      }

      #{$bem-block}__label {
        opacity: .35;
      }
    }
  }

  &--ghost {
    color: $button-regular-ghost-text-color;
    background-color: $button-regular-ghost-background-color;
    border-color: $button-regular-ghost-border-color;

    &#{$bem-block}--theme-inverted {
      color: $button-regular-ghost-text-color-inverted;
      border-color: $button-regular-ghost-border-color-inverted;
    }

    &:not([disabled]) {
      &:hover,
      &:focus,
      &:active {
        color: $button-regular-ghost-text-color-hover;
        background: $button-regular-ghost-background-color-hover;
        border-color: $button-regular-ghost-border-color-hover;
      }
    }

    &[disabled] {
      color: $button-regular-ghost-text-color-disabled;
      background: $button-regular-ghost-background-color-disabled;
      border-color: $button-regular-ghost-border-color-disabled;

      #{$bem-block}__icon {
        opacity: 1;
      }

      #{$bem-block}__label {
        opacity: 1;
      }
    }
  }

  &--highlight {
    color: $button-regular-highlight-text-color;
    background-color: $button-regular-highlight-background-color;
    border-color: $button-regular-highlight-border-color;

    &:not([disabled]) {
      &:hover,
      &:focus,
      &:active {
        background: $button-regular-highlight-background-color-hover;
        border-color: $button-regular-highlight-border-color-hover;
        text-decoration: none;

        &#{$bem-block}--theme-inverted { // sass-lint:disable-line nesting-depth
          background: $button-regular-highlight-background-color-inverted-hover;
          border-color: $button-regular-highlight-border-color-inverted-hover;
        }
      }
    }

    &[disabled] {
      background-color: $button-regular-highlight-background-color-disabled;
      border-color: $button-regular-highlight-border-color-disabled;

      #{$bem-block}__icon {
        opacity: .6;
      }

      #{$bem-block}__label {
        opacity: .6;
      }

      &#{$bem-block}--theme-inverted {
        color: $button-regular-highlight-text-color-inverted-disabled;
        background-color: $button-regular-highlight-background-color-inverted-disabled;
        border-color: $button-regular-highlight-border-color-inverted-disabled;
      }
    }
  }

  &--sales {
    color: $button-regular-highlight-text-color;
    background-color: $button-regular-sales-background-color;
    border-color: $button-regular-sales-border-color;

    &:not([disabled]) {
      &:hover,
      &:focus,
      &:active {
        background: $button-regular-sales-background-color-hover;
        border-color: $button-regular-sales-border-color-hover;
        text-decoration: none;

        &#{$bem-block}--theme-inverted { // sass-lint:disable-line nesting-depth
          background: $button-regular-sales-background-color-inverted-hover;
          border-color: $button-regular-sales-border-color-inverted-hover;
        }
      }
    }

    &[disabled] {
      background-color: $button-regular-sales-background-color-disabled;
      border-color: $button-regular-sales-border-color-disabled;

      #{$bem-block}__icon {
        opacity: .6;
      }

      #{$bem-block}__label {
        opacity: .6;
      }

      &#{$bem-block}--theme-inverted {
        color: $button-regular-sales-text-color-inverted-disabled;
        background-color: $button-regular-sales-background-color-inverted-disabled;
        border-color: $button-regular-sales-border-color-inverted-disabled;
      }
    }
  }

  &--sales-ghost {
    color: $button-regular-sales-ghost-text-color;
    background-color: $button-regular-sales-ghost-background-color;
    border-color: $button-regular-sales-ghost-border-color;

    &:not([disabled]) {
      &:hover,
      &:focus,
      &:active {
        color: $button-regular-sales-ghost-text-color-hover;
        background: $button-regular-sales-ghost-background-color-hover;
        border-color: $button-regular-sales-ghost-border-color-hover;
      }
    }

    &[disabled] {
      color: $button-regular-sales-ghost-text-color-disabled;
      background: $button-regular-sales-ghost-background-color-disabled;
      border-color: $button-regular-sales-ghost-border-color-disabled;

      #{$bem-block}__icon {
        opacity: 1;
      }

      #{$bem-block}__label {
        opacity: 1;
      }
    }
  }

  &--small {
    padding: rem(2px) rem(11px);

    #{$bem-block}__icon {
      @include -spacing-3('right', 'margin');
    }
  }

  &--loading {
    cursor: default;
    pointer-events: none;
  }

  &--stretch {
    width: $button-regular-stretch-width;
  }

  &--button-group {
    @include -spacing-12('left', 'margin');
  }

  &__icon {
    @include -spacing-6('right', 'margin');
    position: relative;
    display: block;
    font-size: $button-regular-icon-font-size;
    line-height: inherit;

    &--loading {

      &::before {
        visibility: hidden;
      }

      & #{$bem-block}__loader {
        visibility: visible;
      }
    }
  }

  &__loader {
    position: absolute;
    top: $button-regular-loader-position;
    left: $button-regular-loader-position;
    margin: {
      top: $button-regular-loader-offset;
      left: $button-regular-loader-offset;
    }
    width: $button-regular-loader-size;
    height: $button-regular-loader-size;
    visibility: hidden;
  }

  &__label {
    // padding-left: rem(22px);
    display: block;
    width: 100%;
  }

  // fix for Firefox, so that top alignment of button content works when two button are next to each other
  @-moz-document url-prefix() { //sass-lint:disable-line no-vendor-prefixes
    &__label {
      height: 100%;
    }
  }
}
