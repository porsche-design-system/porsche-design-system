<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Monitor â€“ Porsche Design System</title>
    <meta name="description" content="" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdn.ui.porsche.com/porsche-design-system/styles/font-face.min.02bef87be3cf3d34b4a5b63f52555cf5.css"
      type="text/css"
      crossorigin
    />
    <script src="https://d3js.org/d3.v4.js"></script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        font-family: 'Porsche Next', 'Arial Narrow', Arial, 'Heiti SC', SimHei, sans-serif;
        line-height: calc(6px + 2.125ex);
        letter-spacing: normal;
        text-size-adjust: none;
        -webkit-text-size-adjust: none;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      p {
        margin: 0;
      }

      #monitor {
        display: grid;
        grid-template-columns: 30vw 70vw;
        grid-template-rows: repeat(2, 50vh);
      }

      #title {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-end;
        padding: 16px;
      }

      #versions rect {
        fill: rgba(255, 0, 0, 0.25);
      }

      #versions text {
        fill: rgba(255, 0, 0, 0.75);
      }

      #components {
        grid-column: 2;
        grid-row: 1 / 3;
      }

      #components rect {
        fill: rgba(0, 0, 255, 0.25);
      }

      #components text {
        fill: rgba(0, 0, 255, 0.75);
      }
    </style>
  </head>
  <body>
    <div id="monitor">
      <div id="title">
        <p-heading size="large">%title%</p-heading>
        <p-heading>
          <a href="%url%">%subtitle%</a>
        </p-heading>
      </div>
      <div id="versions"></div>
      <div id="components"></div>
    </div>
    <script>
      // set the dimensions and margins of the graph
      const margin = { top: 0, right: 0, bottom: 0, left: 0 },
        width = (window.innerWidth / 100) * 30 - margin.left - margin.right,
        height = window.innerHeight / 2 - margin.top - margin.bottom;

      // append the svg object to the body of the page
      const svg = d3
        .select('#versions')
        .append('svg')
        .attr('width', width + margin.left + margin.right)
        .attr('height', height + margin.top + margin.bottom)
        .append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

      const versions = {
        children: %versions%
      };

      // Give the data to this cluster layout:
      const root = d3.hierarchy(versions).sum((d) => {
        return d.value;
      }); // Here the size of each leave is given in the 'value' field in input data

      // Then d3.treemap computes the position of each element of the hierarchy
      d3.treemap().size([width, height]).padding(1)(root);

      // use this information to add rectangles:
      svg
        .selectAll('rect')
        .data(root.leaves())
        .enter()
        .append('rect')
        .attr('x', (d) => d.x0)
        .attr('y', (d) => d.y0)
        .attr('width', (d) => d.x1 - d.x0)
        .attr('height', (d) => d.y1 - d.y0);

      // and to add the text labels
      svg
        .selectAll('text')
        .data(root.leaves())
        .enter()
        .append('text')
        .attr('x', (d) => d.x0 + 5)
        .attr('y', (d) => d.y0 + 20)
        .text((d) => d.data.name);
    </script>

    <script>
      // set the dimensions and margins of the graph
      const margin2 = { top: 0, right: 0, bottom: 0, left: 0 },
        width2 = (window.innerWidth / 100) * 70 - margin.left - margin.right,
        height2 = window.innerHeight - margin.top - margin.bottom;

      // append the svg object to the body of the page
      const svg2 = d3
        .select('#components')
        .append('svg')
        .attr('width', width2 + margin.left + margin.right)
        .attr('height', height2 + margin.top + margin.bottom)
        .append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

      const components = {
        children: %components%
      };

      // Give the data to this cluster layout:
      const root2 = d3.hierarchy(components).sum((d) => {
        return d.value;
      }); // Here the size of each leave is given in the 'value' field in input data

      // Then d3.treemap computes the position of each element of the hierarchy
      d3.treemap().size([width2, height2]).padding(1)(root2);

      // use this information to add rectangles:
      svg2
        .selectAll('rect')
        .data(root2.leaves())
        .enter()
        .append('rect')
        .attr('x', (d) => d.x0)
        .attr('y', (d) => d.y0)
        .attr('width', (d) => d.x1 - d.x0)
        .attr('height', (d) => d.y1 - d.y0);

      // and to add the text labels
      svg2
        .selectAll('text')
        .data(root2.leaves())
        .enter()
        .append('text')
        .attr('x', (d) => d.x0 + 5)
        .attr('y', (d) => d.y0 + 20)
        .text((d) => d.data.name);
    </script>
    <script data-pds-loader-script>
      var porscheDesignSystem;
      (() => {
        'use strict';
        var e = {
            d: (t, s) => {
              for (var n in s) e.o(s, n) && !e.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: s[n] });
            },
            o: (e, t) => Object.prototype.hasOwnProperty.call(e, t),
            r: (e) => {
              'undefined' != typeof Symbol &&
                Symbol.toStringTag &&
                Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
                Object.defineProperty(e, '__esModule', { value: !0 });
            },
          },
          t = {};
        e.r(t), e.d(t, { load: () => o });
        const s = 'porscheDesignSystem';
        function n() {
          return document[s] || (document[s] = {}), document[s];
        }
        function r({ script: e, version: t, prefix: r }) {
          const o =
              (function (e) {
                const t = n(),
                  { [e]: s = null } = t;
                if (null === s) {
                  let s = () => {};
                  const n = new Promise((e) => (s = e)),
                    r = {
                      isInjected: !1,
                      isReady: () => n,
                      readyResolve: s,
                      prefixes: [],
                      registerCustomElements: null,
                    };
                  t[e] = r;
                }
                return t[e];
              })(t) || {},
            { isInjected: i, prefixes: c = [], registerCustomElements: d } = o,
            [l] = Object.entries(n()).filter(([e, s]) => e !== t && s.prefixes.includes(r));
          if (l)
            throw new Error(
              `[Porsche Design System] prefix '${r}' is already registered with version '${l[0]}' of the Porsche Design System. Please use a different one.\nTake a look at document.${s} for more details.`
            );
          i ||
            ((function (e) {
              const t = document.createElement('script');
              (t.src = e), t.setAttribute('crossorigin', ''), document.body.appendChild(t);
            })(e),
            (o.isInjected = !0)),
            c.includes(r) || (c.push(r), d && d(r));
        }
        const o = (e = { prefix: '' }) => {
          r(
            Object.assign(
              Object.assign(
                {},
                {
                  version: '3.2.0',
                  script:
                    (typeof window !== 'undefined' && window.PORSCHE_DESIGN_SYSTEM_CDN === 'cn'
                      ? 'https://cdn.ui.porsche.cn'
                      : 'https://cdn.ui.porsche.com') +
                    '/porsche-design-system/components/porsche-design-system.v3.2.0.0fc250a8c31a5e3fa996.js',
                }
              ),
              e
            )
          );
        };
        porscheDesignSystem = t;
      })();
      porscheDesignSystem.load();
    </script>
  </body>
</html>
