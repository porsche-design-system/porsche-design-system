<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Porsche Design System - JS (Custom Prefix only)</title>
    <base href="/" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript" src="index.js"></script>
  </head>
  <body>
    <select onchange="document.location.hash = `#${this.value}`">
      <option disabled selected>Select a page</option>
      <option value="overview">Overview</option>
    </select>
    <div id="app"></div>
    <script>
      const updateRoute = async () => {
        if (['#', ''].includes(document.location.hash)) {
          return;
        }

        const app = document.getElementById('app');
        const page = document.location.hash.substr(1);
        app.innerHTML = (await (await fetch(`/pages/${page}.html`)).text()).replace(/>(\s|\n|\r)*</g, '><');

        // execute scripts inserted via innerHTML
        const scripts = app.getElementsByTagName('script');
        for (let i = 0; i < scripts.length; i++) {
          eval(scripts[i].innerText);
        }
      };

      porscheDesignSystem.load();
      window.addEventListener('hashchange', updateRoute);
      updateRoute();
    </script>
  </body>
</html>
