<div class="playground light table" title="should render table">
  <script>
    fetch('assets/shared.js')
      .then((res) => res.text())
      .then((content) => {
        const [, headStr] = /const head = ((.|\s)*?);/.exec(content) || [];
        const head = eval(headStr);

        const [, dataStr] = /const data = ((.|\s)*?);/.exec(content) || [];
        const data = eval(dataStr);

        const renderTableHeadCells = (items) =>
          items.map((item) => `<p-table-head-cell>${item.name}</p-table-head-cell>`).join('');

        const renderTableBodyRows = (items) =>
          items
            .map(
              (item) => `
<p-table-row>
  <p-table-cell>
    <p-flex>
      <p-flex-item>
        <img src="${item.imageUrl}" width="80" style="margin-right: 8px" alt="">
      </p-flex-item>
      <p-flex-item>
        <p-text weight='semibold'>${item.model}</p-text>
        <p-text size='x-small'>${item.date}</p-text>
      </p-flex-item>
    </p-flex>
  </p-table-cell>
  <p-table-cell>${item.interest}</p-table-cell>
  <p-table-cell>${item.vin}</p-table-cell>
  <p-table-cell>${item.purchaseIntention}</p-table-cell>
  <p-table-cell>${item.status}</p-table-cell>
  <p-table-cell>${item.leadId}</p-table-cell>
  <p-table-cell>
    <p-button-pure icon="edit">
      <span style="white-space: nowrap">Edit Lead</span>
    </p-button-pure>
  </p-table-cell>
  <p-table-cell>
    <p-button variant="tertiary" icon="refresh">
      <span style="white-space: nowrap">Overwrite</span>
    </p-button>
  </p-table-cell>
</p-table-row>`
            )
            .join('');

        const markup = `
<p-table>
  <p-table-head>
    <p-table-row>${renderTableHeadCells(head)}</p-table-row>
  </p-table-head>
  <p-table-body>${renderTableBodyRows(data)}</p-table-body>
</p-table>`;

        const playground = document.querySelector('.table');
        playground.innerHTML = markup;

        const table = playground.querySelector('p-table');
        const tableHead = table.querySelector('p-table-head');
        const tableBody = table.querySelector('p-table-body');

        // pass head item via property
        const passHeadItemToNodes = (items) =>
          Array.from(tableHead.querySelectorAll('p-table-head-cell')).forEach((el, index) => {
            el.item = items[index];
          });

        passHeadItemToNodes(head);

        table.addEventListener('sortingChange', (e) => {
          const { key, direction } = e.detail;

          const sortedHead = head.map((x) => ({ ...x, isSorting: false, ...(x.key === key && e.detail) }));
          const sortedData = [...data].sort((a, b) =>
            direction === 'asc' ? a[key].localeCompare(b[key]) : b[key].localeCompare(a[key])
          );

          passHeadItemToNodes(sortedHead);
          tableBody.innerHTML = renderTableBodyRows(sortedData);
        });
      });
  </script>
</div>
