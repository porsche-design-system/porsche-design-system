import { Notification } from '@/components/common/Notification';
import { TableOfContents } from '@/components/common/TableOfContents';

export const metadata = {
  title: 'Migration Guide: Tailwind CSS - Porsche Design System',
  description: 'Learn how to migrate the Tailwind CSS styles from Porsche Design System v3 to v4.',
};

# Migration Guide

<TableOfContents headings={['‚≠ê Introducing Color Scheme', 'üëπ Breaking Changes', 'ü§° Deprecations']} />

## ‚≠ê Introducing Color Scheme

The new color system leverages the CSS
[`light-dark()`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Values/color_value/light-dark) function to
deliver native, preference-based theming. By adopting this browser-native engine, we have eliminated the need for
proprietary switching logic, resulting in a more performant and standardized architecture.

### Core Implementation

All colors and styles are now driven by the CSS
[`color-scheme`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Properties/color-scheme) property. To ensure
broad compatibility, we extended the existing Tailwind CSS `.scheme-*` utility classes with a polyfill for browsers that
do not yet support `light-dark()` (see [browser support](https://caniuse.com/mdn-css_types_color_light-dark)).

#### Utility Classes

Apply these classes to the document or any container to control the theme context:

- `.scheme-light` ‚Äî Forces light mode.
- `.scheme-dark` ‚Äî Forces dark mode.
- `.scheme-light-dark` ‚Äî Dynamically follows system/OS settings.

### Usage

The defined theme context will cascade to all child elements.

```html
<!-- Defined theme will be applied to all child elements -->
<html class="scheme-dark">
  <head></head>
  <body>
    <!-- Will be rendered in dark mode -->
    <div class="bg-frosted text-primary"></div>
  </body>
</html>
```

## üëπ Breaking Changes

- Theme utility classes `light`, `dark` and `auto` have been removed in favor of `scheme-light`, `scheme-dark` and
  `scheme-light-dark`. Please update your class names accordingly.

```diff
- <html class="dark">
+ <html class="scheme-dark">
```

```diff
- <html class="light">
+ <html class="scheme-light">
```

```diff
- <html class="auto">
+ <html class="scheme-light-dark">
```

- Ensure consistency with the Porsche Brand Guide by resetting Tailwind CSS defaults. Note that this is a breaking
  change: standard utilities like `bg-red-500` will no longer function. You must now use the approved PDS tokens for all
  styling to ensure brand compliance.

```css
@theme {
  --color-*: initial;
}
```

- Removed `--color-disabled`, use `--color-contrast-lower` instead.
- Removed `--color-*-light` and `--color-*-dark` color variables, use `--color-*` or the corresponding CSS utility
  classes, e.g. `bg-frosted` or `text-primary` instead. The new variables automatically resolve to the correct value
  based on the active theme.

## ü§° Deprecations

Please transition to the new styles as soon as possible. All legacy styles are currently deprecated and are scheduled
for removal in the next major release.

### Border

See [Tailwind CSS Border Examples](/tailwindcss/border/examples) for more details.

```diff
- .border-thin
+ .border
- .border-regular
+ .border
```

### Shadow

See [Tailwind CSS Shadow Examples](/tailwindcss/shadow/examples) for more details.

```diff
- .shadow-low
+ .shadow-sm
- .shadow-medium
+ .shadow-md
- .shadow-high
+ .shadow-lg
```

### Motion

See [Tailwind CSS Motion Examples](/tailwindcss/motion/examples) for more details.

```diff
- .duration-short
+ .duration-sm
- .duration-moderate
+ .duration-md
- .duration-long
+ .duration-lg
- .duration-very-long
+ .duration-xl
```
