import { Notification } from '@/components/common/Notification';
import { TableOfContents } from '@/components/common/TableOfContents';

export const metadata = {
  title: 'Migration Guide: Emotion - Porsche Design System',
  description: 'Learn how to migrate the Emotion styles from Porsche Design System v3 to v4.',
};

# Migration Guide

<TableOfContents
  headings={['â­ Introducing Color Scheme', 'ðŸ‘¹ Breaking Changes', 'ðŸ¤¡ Deprecations (will be removed in v5)']}
/>

The library previously known as `JS` styles (`/styles`) has been officially rebranded as Emotion styles. While these
styles may still function with Styled Components or other CSS-in-JS solutions, Emotion is the only officially supported
framework moving forward.

These styles are built directly upon the [Tokens](/tokens/introduction) package; however, if you are utilizing a
different styling solution, you can still consume the design tokens independently.

## â­ Introducing Color Scheme

The new color system leverages the CSS
[`light-dark()`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Values/color_value/light-dark) function to
deliver native, preference-based theming. By adopting this browser-native engine, we have eliminated the need for
proprietary switching logic, resulting in a more performant and standardized architecture.

> **âš ï¸ Deprecation Notice:** Legacy Emotion color variables are officially deprecated and scheduled for removal in the
> next major release. We recommend migrating to the new functional tokens immediately to ensure your components remain
> future-proof.

### Core Implementation

All colors and styles are now driven by the CSS
[`color-scheme`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Properties/color-scheme) property. To ensure
broad compatibility, we provide the global `colorSchemeStyles`, which generates utility classes and includes a polyfill
for browsers that do not yet support `light-dark()` (see
[browser support](https://caniuse.com/mdn-css_types_color_light-dark)).

#### Utility Classes

Apply these classes to the document or any container to control the theme context:

- `.scheme-light` â€” Forces light mode.
- `.scheme-dark` â€” Forces dark mode.
- `.scheme-light-dark` â€” Dynamically follows system/OS settings.

### Usage

#### 1. Global Setup

Include the global styles once in your `main.tsx` to initialize the theme utilities.

```diff
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import './index.css';
import { PorscheDesignSystemProvider } from '@porsche-design-system/components-react';
import { App } from './App.tsx';
+ import { colorSchemeStyles } from '@porsche-design-system/components-react/emotion';
+ import { Global } from '@emotion/react';

createRoot(document.getElementById('root')!).render(
  <StrictMode>
+   <Global styles={colorSchemeStyles} />
    <PorscheDesignSystemProvider>
      <App />
    </PorscheDesignSystemProvider>
  </StrictMode>
);

```

#### 2. Component Implementation

Utilize the new tokens within your styles. These variables automatically resolve to the correct value based on the
active theme.

```tsx
import styled from '@emotion/styled';
import { colorFrosted, colorPrimary } from '@porsche-design-system/components-react/emotion';

const MyComponent = styled.div({
  backgroundColor: colorFrosted,
  color: colorPrimary,
});
```

#### 3. Application

The defined theme context will cascade to all child elements.

```tsx
import { MyComponent } from './MyComponent';

<!-- Defined theme will be applied to all child elements -->
export const App = () => {
  return (
    <div className="scheme-dark">
      <MyComponent></MyComponent>
    </div>
  );
};

```

## ðŸ‘¹ Breaking Changes

- Changed import path for Emotion styles.

```diff
- import { â€¦ } from '@porsche-design-system/components-{js|angular|react|vue}/styles';
+ import { â€¦ } from '@porsche-design-system/components-{js|angular|react|vue}/emotion';
```

- Removed `getHoverStyle` since it did not work reliable.

- Removed `opts` parameter in `getSkeletonStyle()` including `theme` (New skeleton style works with `light-dark()` CSS
  color function).

```diff
- getSkeletonStyle({ theme: 'light|dark' })
+ getSkeletonStyle()
```

## ðŸ¤¡ Deprecations (will be removed in v5)

Please transition to the new styles as soon as possible. All legacy styles are currently deprecated and are scheduled
for removal in the next major release.

### Blur

See [Emotion Blur Examples](/emotion/blur/examples) for more details.

```diff
- ...frostedGlassStyle,
+ backdropFilter: blurFrosted,
```

### Border

See [Emotion Border Examples](/emotion/border/examples) for more details.

```diff
- borderRadius: borderRadiusMedium,
+ borderRadius: radiusMd,
- borderRadius: borderRadiusSmall,
+ borderRadius: radiusSm,
- borderRadius: borderRadiusLarge,
+ borderRadius: radiusLg,
- borderWidth: borderWidthBase,
+ borderWidth: 2px,
- borderWidth: borderWidthThin,
+ borderWidth: 1px;
```

### Color

New color definitions now leverage the native CSS
[`light-dark()`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Values/color_value/light-dark) function. You
can explore implementation samples in the [Emotion Color Examples](/emotion/color/examples) or dive deeper into our
system architecture in the [Theme Guide](/must-know/theme).

```diff
- themeLightPrimary
- themeDarkPrimary
+ colorPrimary
- themeLightBackgroundBase
- themeDarkBackgroundBase
+ colorCanvas
- themeLightBackgroundSurface
- themeDarkBackgroundSurface
+ colorSurface
- themeLightBackgroundShading
- themeDarkBackgroundShading
+ colorBackdrop
- themeLightBackgroundFrosted
- themeDarkBackgroundFrosted
+ colorFrosted
- themeLightContrastLow
- themeDarkContrastLow
+ colorContrastLow
- themeLightContrastMedium
- themeDarkContrastMedium
+ colorContrastMedium
- themeLightContrastHigh
- themeDarkContrastHigh
+ colorContrastHigh
- themeLightNotificationSuccess
- themeDarkNotificationSuccess
+ colorSuccess
- themeLightNotificationSuccessSoft
- themeDarkNotificationSuccessSoft
+ colorSuccessFrosted
- themeLightNotificationWarning
- themeDarkNotificationWarning
+ colorWarning
- themeLightNotificationWarningSoft
- themeDarkNotificationWarningSoft
+ colorWarningFrosted
- themeLightNotificationError
- themeDarkNotificationError
+ colorError
- themeLightNotificationErrorSoft
- themeDarkNotificationErrorSoft
+ colorErrorFrosted
- themeLightNotificationInfo
- themeDarkNotificationInfo
+ colorInfo
- themeLightNotificationInfoSoft
- themeDarkNotificationInfoSoft
+ colorInfoFrosted
- themeLightStateHover
- themeDarkStateHover
// Not renamed yet, will be removed in next major release
- themeLightStateActive
- themeDarkStateActive
// Not renamed yet, will be removed in next major release
- themeLightStateFocus
- themeDarkStateFocus
+ colorFocus
- themeLightStateDisabled
- themeDarkStateDisabled
+ colorContrastLower
```

### Focus

See [Emotion Focus Examples](/emotion/focus/examples) for more details.

```diff
- ...getFocusStyle(),
+ ...getFocusVisibleStyle(),
```

### Gradient

See [Emotion Gradient Examples](/emotion/gradient/examples) for more details.

```diff
- ...gradientToBottomStyle,
+ background: `linear-gradient(to bottom, ${gradientStopsFadeDark});`
- ...gradientToLeftStyle,
+ background: `linear-gradient(to left, ${gradientStopsFadeDark});`
- ...gradientToRightStyle,
+ background: `linear-gradient(to right, ${gradientStopsFadeDark});`
- ...gradientToTopStyle,
+ background: `linear-gradient(to top, ${gradientStopsFadeDark});`
```

### Motion

See [Emotion Motion Examples](/emotion/motion/examples) for more details.

```diff
- transitionDuration: motionDurationShort,
+ transitionDuration: durationSm,
- transitionDuration: motionDurationModerate,
+ transitionDuration: durationMd,
- transitionDuration: motionDurationLong,
+ transitionDuration: durationLg,
- transitionDuration: motionDurationVeryLong,
+ transitionDuration: durationXl,
- transitionTimingFunction: motionEasingBase,
+ transitionTimingFunction: easeInOut,
- transitionTimingFunction: motionEasingIn,
+ transitionTimingFunction: easeIn,
- transitionTimingFunction: motionEasingOut,
+ transitionTimingFunction: easeOut,
```

### Shadow

See [Emotion Shadow Examples](/emotion/shadow/examples) for more details.

```diff
- ...dropShadowHighStyle,
+ boxShadow: shadowLg,
- ...dropShadowMediumStyle,
+ boxShadow: shadowMd,
- ...dropShadowLowStyle,
+ boxShadow: shadowSm,
```

### Spacing

See [Emotion Spacing Examples](/emotion/spacing/examples) for more details.

```diff
- spacingFluidXSmall
+ spacingFluidXs
- spacingFluidSmall
+ spacingFluidSm
- spacingFluidMedium
+ spacingFluidMd
- spacingFluidLarge
+ spacingFluidLg
- spacingFluidXLarge
+ spacingFluidXl
- spacingFluidXXLarge
+ spacingFluid2Xl
- spacingStaticXSmall
+ spacingStaticXs
- spacingStaticSmall
+ spacingStaticSm
- spacingStaticMedium
+ spacingStaticMd
- spacingStaticLarge
+ spacingStaticLg
- spacingStaticXLarge
+ spacingStaticXl
- spacingStaticXXLarge
+ spacingStatic2Xl
```

### Typography

See [Emotion Typography Examples](/emotion/typography/examples) for more details.

```diff
- ...displayLargeStyle,
+ ...proseDisplayLgStyle,
- ...displayMediumStyle,
+ ...proseDisplayMdStyle,
- ...displaySmallStyle,
+ ...proseDisplaySmStyle,
- ...headingXXLargeStyle,
+ ...proseHeading2XlStyle,
- ...headingXLargeStyle,
+ ...proseHeadingXlStyle,
- ...headingLargeStyle,
+ ...proseHeadingLgStyle,
- ...headingMediumStyle,
+ ...proseHeadingMdStyle,
- ...headingSmallStyle,
+ ...proseHeadingSmStyle,
- ...textXLargeStyle,
+ ...proseTextXlStyle,
- ...textLargeStyle,
+ ...proseTextLgStyle,
- ...textMediumStyle,
+ ...proseTextMdStyle,
- ...textSmallStyle,
+ ...proseTextSmStyle,
- ...textXSmallStyle,
+ ...proseTextXsStyle,
- ...textXXSmallStyle,
+ ...proseText2XsStyle,
```
