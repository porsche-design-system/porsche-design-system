import { Notification } from '@/components/common/Notification';
import { TableOfContents } from '@/components/common/TableOfContents';
import { PTag } from '@porsche-design-system/components-react/ssr';

export const metadata = {
  title: 'Next.js: Getting started - Porsche Design System',
  description: 'Start developing in Next.js with the Porsche Design System.',
};

# Next.js

<TableOfContents headings={['Quick start', 'Integration']} />

## Quick start

To build a [Next.js](https://nextjs.org/docs/app/getting-started/installation) application using the Porsche Design
System, follow these steps. This guide is based on the following dependencies:

<div className="flex flex-wrap gap-static-sm my-fluid-sm">
  {/* prettier-ignore */}
  <PTag compact={true} color="notification-info-soft">next@15</PTag>
  {/* prettier-ignore */}
  <PTag compact={true} color="notification-info-soft">react@19</PTag>
  {/* prettier-ignore */}
  <PTag compact={true} color="notification-info-soft">tailwindcss@4</PTag>
  {/* prettier-ignore */}
  <PTag compact={true} color="notification-info-soft">@porsche-design-system/components-react@3</PTag>
</div>

```bash
# Create a new application by executing:
npx create-next-app@latest

# Follow the installation wizard to set everything up:
✔ What is your project named? "my-app"
✔ Would you like to use TypeScript? "Yes"
✔ Would you like to use ESLint? "Yes"
✔ Would you like to use Tailwind CSS? "Yes"
✔ Would you like your code inside a `src/` directory? "No"
✔ Would you like to use App Router? (recommended) "Yes"
✔ Would you like to use Turbopack for `next dev`?  "No"
✔ Would you like to customize the import alias (`@/*` by default)? "No"
```

You're all set! Start building your own application now.

## Integration

<Notification heading="Attention" headingTag="h3" state="warning">
  The following examples use the **SSR** sub-package from `@porsche-design-system/components-react/ssr`.

This sub-package is a specialized build of the Porsche Design System components that renders different markup on the
server compared to the browser. While this deviates from traditional SSR/SSG rules (where browser and server markup
should be identical), it's necessary to enable SSR/SSG with web components and Shadow DOM.

The two environments are detected via the `process.browser` flag, which is replaced with a boolean value at build time.
In the browser, the components behave like the standard React components from `@porsche-design-system/components-react`.

On the server, the behavior differs: Relevant markup and styles are rendered into a Declarative Shadow DOM, which modern
browsers convert to a real Shadow DOM without JavaScript. This handles the initial render efficiently. Once the client
code loads and executes, the Porsche Design System components initialize as usual.

**Important:** Ensure dead code elimination is enabled for the client build to prevent server-side code from leaking
into the browser bundle.

</Notification>

### Step 1

Install the Porsche Design System within your project directory.

```bash
npm install @porsche-design-system/components-react
```

### Step 2

Wrap your app with the `<PorscheDesignSystemProvider />`.

```tsx
// app/layout.tsx

import { PorscheDesignSystemProvider } from '@porsche-design-system/components-react/ssr'; // ensure to import from ssr subpackage!

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body>
        <PorscheDesignSystemProvider>{children}</PorscheDesignSystemProvider>
      </body>
    </html>
  );
}
```

### Step 3

Add the Porsche Design System stylesheet to your main CSS file. This single import already includes all required and
recommended styles, such as:

- CSS color variables
- Font-face definitions
- Normalize styles

If your website will be used primarily in China, use the `/cn` import. See
[China CDN](/developing/react/advanced#china-cdn) for more details.

```diff
/* app/globals.css */
+ @import '@porsche-design-system/components-react';
```

To prevent Flash of Unstyled Content (FOUC), hide elements until they are either registered
([`:defined`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Selectors/:defined)) or fully rendered by
Stencil ([`.hydrated`](https://stenciljs.com/docs/config#hydratedflag)). If you encounter any problems with the
`:defined` pseudo-class, consider applying the style only to the relevant tags (`:is(p-button...)`). See
[Initialization](/must-know/initialization/vanilla-js/#preparation) for more details.

If all the components are fully rendered server-side (e.g., when using the `/ssr` sub-package), it is not necessary to
do this.

```diff
/* app/globals.css */
@import '@porsche-design-system/components-react';

+ :not(:defined,[data-ssr]) {
+   visibility: hidden;
+ }
```

### Step 4 (recommended)

To boost your web application's performance and minimize issues like FOUC (Flash of Unstyled Content) and FOUT (Flash of
Unstyled Text), you can integrate [Partials](/partials/introduction) from the Porsche Design System into the `<head>`
section of your HTML.

```tsx
// app/layout.tsx

import { PorscheDesignSystemProvider } from '@porsche-design-system/components-react/ssr'; // ensure to import from ssr subpackage!
import {
  getComponentChunkLinks,
  getFontLinks,
  getIconLinks,
  getMetaTagsAndIconLinks,
} from '@porsche-design-system/components-react/partials';

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <head>
        {/* preloads Porsche Next font (=> minimize FOUT) */}
        {getFontLinks({ format: 'jsx' })}
        {/* preloads PDS component core chunk from CDN for PDS component hydration (=> improve loading performance) */}
        {getComponentChunkLinks({ format: 'jsx' })}
        {/* preloads Porsche icons (=> minimize FOUC) */}
        {getIconLinks({ format: 'jsx' })}
        {/* injects favicon, apple touch icons, android touch icons, etc. */}
        {getMetaTagsAndIconLinks({ appTitle: 'Porsche', format: 'jsx' })}
      </head>
      <body>
        <PorscheDesignSystemProvider>{children}</PorscheDesignSystemProvider>
      </body>
    </html>
  );
}
```

### Step 5 (recommended)

Setting up [Tailwind CSS](https://tailwindcss.com) with the Porsche Design System
[Tailwind CSS Theme](/tailwindcss/introduction) allows you to use a utility-first CSS framework that guarantees
**seamless styling consistency** with Porsche's design principles.

#### The Key Advantage: Universal Code Sharing & Scalability

> Using Tailwind CSS with the Porsche Design System Theme provides a powerful benefit: **Your styles are truly
> framework-agnostic**. Since Tailwind generates atomic **utility classes**, you eliminate cascading style issues,
> promoting long-term **scalability and maintainability** for large projects. The patterns and components you build are
> easily portable. You can **copy and paste** the same styling code between projects, teams, and different technology
> stacks (React, Angular, Vue, plain HTML, etc.), ensuring **100% visual uniformity** across the organization. You can
> now use and customize the provided [Patterns](/patterns) and [Templates](/templates), which are all written in
> Tailwind CSS, to build applications quickly and efficiently.

Import Tailwind CSS and the Porsche Design System Tailwind CSS Theme.

```diff
/* app/globals.css */
@import '@porsche-design-system/components-react';

+ @import 'tailwindcss';
+ @import '@porsche-design-system/components-react/tailwindcss';
```

### Step 6

Add a Porsche Design System component (e.g., `<PWordmark />`) with some Tailwind CSS styles. Then, run `npm run dev` and
verify that the component and styles display correctly.

```tsx
// app/page.tsx

import { PWordmark } from '@porsche-design-system/components-react/ssr'; // ensure to import from ssr subpackage!

export default function Home() {
  return (
    <>
      <div className="grid justify-items-center gap-fluid-md m-static-lg p-fluid-lg bg-surface rounded-lg">
        <PWordmark />
        <h1 className="prose-display-md">Porsche Design System</h1>
      </div>
      <div className="…">…</div>
    </>
  );
}
```
