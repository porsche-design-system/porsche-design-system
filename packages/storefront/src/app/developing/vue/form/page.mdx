import { TableOfContents } from '@/components/common/TableOfContents';
import { PLinkPure } from '@porsche-design-system/components-react/ssr';
import Link from 'next/link';
import { majorVersion } from '@/utils/majorVersion';

export const metadata = {
  title: 'Vue: Form - Porsche Design System',
  description: 'Form integration in Vue with the Porsche Design System.',
};

# Vue

<TableOfContents
  headings={[
    'Form Integration Demo',
    'Automatic Data Binding (Preferred)',
    'Manual State Management',
    'Native Form Submission',
  ]}
/>

Porsche Design System form components can be integrated into Vue using different techniques based on your state
management and form handling preferences. Each component automatically keeps its internal value in sync, similar to
native form elements.

All form components support:

- **Automatic Data Binding (`v-model`)** using `v-model:property` directive (e.g. `v-model:value` or `v-model:checked`)
- **Manual State Management (Props + Events)** using `value`/`checked` properties and `change`/`input`/`blur` event
  listeners
- **Native form submission** using form-associated custom elements

## Form Integration Demo

A complete example of how to integrate form components with Vue can be explored here:

<div className="flex flex-wrap gap-static-md mt-fluid-lg">
  <PLinkPure icon="external">
    {/* prettier-ignore */}
    <Link href={`https://github.com/porsche-design-system/examples/tree/v${majorVersion}/frameworks/vue`}>Source Code</Link>
  </PLinkPure>
  <PLinkPure icon="external">
    <Link href={`https://porsche-design-system.github.io/examples/v${majorVersion}/vue`}>View Fullscreen</Link>
  </PLinkPure>
</div>

<iframe
  className="my-fluid-md w-full aspect-3/2 rounded-lg shadow-high"
  title="Vue: Demo application"
  src={`https://porsche-design-system.github.io/examples/v${majorVersion}/vue`}
/>

## Automatic Data Binding (Preferred)

All custom form components support [`v-model`](https://vuejs.org/guide/components/v-model) for seamless two-way data
binding with your model. Because our components don’t use the default `modelValue` property, you need to explicitly
specify which property should be bound to the model by using an argument — for example, `v-model:value` or
`v-model:checked`.

```javascript
<PInputText v-model:value="myInputText" :name="'myInputText'" :label="'Some Label'" />
...
const myInputText = ref('');
```

## Manual State Management

While all custom form components update their internal state automatically, you can manage their values externally using
the `value` or `checked` props along with `input`, `change`, and `blur` events. This approach allows flexible
integration with any form library.

```javascript
<PInputText :name="'myInputText'" :label="'Some Label'" :value="value" @input="onInput" />
...
const value = ref<string>('');

const onInput = (e: InputTextInputEventDetail) => {
  value.value = (e.target as HTMLInputElement).value;
};
```

## Native Form Submission

All custom form components are form-associated custom elements that integrate seamlessly with forms. Leveraging the
[ElementInternals](https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals) API, They will work like their
native counterparts, ensuring compatibility with form behaviors.

```javascript
<form @submit.prevent="onSubmit">
  <PInputText :name="'myInputText'" :label="'Some Label'" />
  <PButton type="submit">Submit</PButton>
</form>
...
const onSubmit = (e: Event) => {
  console.log(e);
};
```
