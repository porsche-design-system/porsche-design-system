import { TableOfContents } from '@/components/common/TableOfContents';
import { PTag } from '@porsche-design-system/components-react/ssr';
import { localPorscheDesignSystemMajorVersion } from '@/utils/porscheDesignSystemVersion';

export const metadata = {
  title: 'Angular: Getting started - Porsche Design System',
  description: 'Start developing in Angular with the Porsche Design System.',
};

# Angular

<TableOfContents headings={['Quick start', 'Integration']} />

## Quick start

To build an [Angular](https://angular.dev/installation) application using the Porsche Design System, follow these steps.
This guide is based on the following dependencies:

<div className="flex flex-wrap gap-static-sm my-fluid-sm">
  {/* prettier-ignore */}
  <PTag compact={true} variant="info">@angular/*@21</PTag>
  {/* prettier-ignore */}
  <PTag compact={true} variant="info">tailwindcss@4</PTag>
  {/* prettier-ignore */}
  <PTag compact={true} variant="info">@porsche-design-system/components-angular@{localPorscheDesignSystemMajorVersion}</PTag>
</div>

```bash
# Create a new application by executing:
npm install -g @angular/cli
ng new my-app

✔ Do you want to create a 'zoneless' application without zone.js (Developer Preview)? "Yes"
✔ Which stylesheet format would you like to use? "CSS"
✔ Do you want to enable Server-Side Rendering (SSR) and Static Site Generation (SSG/Prerendering)? "No"
```

You're all set! Start building your own application now.

## Integration

### Step 1

Install the Porsche Design System within your project directory.

```bash
npm install @porsche-design-system/components-angular
```

### Step 2

Add the `PorscheDesignSystemModule` to the imports array of your `@Component` or `@NgModule` declaration.

```ts
// src/app/app.ts

import { Component, signal } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { PorscheDesignSystemModule } from '@porsche-design-system/components-angular';

@Component({
  selector: 'app-root',
  imports: [RouterOutlet, PorscheDesignSystemModule],
  templateUrl: './app.html',
  styleUrl: './app.css',
})
export class App {
  protected readonly title = signal('angular');
}
```

### Step 3

Add the Porsche Design System stylesheet to your main CSS file. This single import already includes all required and
recommended styles, such as:

- CSS color variables
- Font-face definitions
- Normalize styles

If your website will be used primarily in China, use the `/cn` import. See
[China CDN](/must-know/performance/cdn/#china-cdn) for more details.

See [Styles](/styles/introduction/) for more details.

```diff
/* src/styles.css */
+ @import '@porsche-design-system/components-angular/index.css';
```

To prevent Flash of Unstyled Content (FOUC), hide elements until they are either registered
([`:defined`](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Selectors/:defined)) or fully rendered by
Stencil ([`.hydrated`](https://stenciljs.com/docs/config#hydratedflag)). Include the tag names of the components you
want to target. See [Initialization](/must-know/initialization/vanilla-js/#preparation) for more details.

```diff
/* src/styles.css */
@import '@porsche-design-system/components-angular/index.css';

+ :is(p-accordion, p-banner, p-button...):not(:defined) {
+   visibility: hidden;
+ }
```

### Step 4 (recommended)

To boost your web application's performance and minimize issues like FOUC (Flash of Unstyled Content) and FOUT (Flash of
Unstyled Text), you can integrate [Partials](/partials/introduction) from the Porsche Design System into the `<head>`
section of your HTML.

Install
[@angular-builders/custom-webpack](https://github.com/just-jeb/angular-builders/tree/master/packages/custom-webpack#index-transform)
within your project directory.

```bash
npm install @angular-builders/custom-webpack --save-dev
```

Configure the `angular.json`.

```diff
"architect": {
  "build": {
-   "builder": "@angular/build:application",
+   "builder": "@angular-builders/custom-webpack:browser",
    "options": {
-     "browser": "src/main.ts",
+     "indexTransform": "./index-html-transform.js",
+     "outputPath": "./dist",
+     "index": "src/index.html",
+     "main": "src/main.ts",
    }
  }
  "serve": {
-   "builder": "@angular/build:dev-server",
+   "builder": "@angular-builders/custom-webpack:dev-server",
```

Create a `index-html-transform.js` file in your project root directory.

```js
// index-html-transform.js

import {
  getComponentChunkLinks,
  getFontLinks,
  getIconLinks,
  getMetaTagsAndIconLinks,
} from '@porsche-design-system/components-angular/partials';

// https://github.com/just-jeb/angular-builders/blob/fdd7c8ed00b7eb7e1761aaa6cb5bda41693ceb5d/packages/custom-webpack/README.md#index-transform
export default (_, html) => {
  const headPartials = [
    // preloads Porsche Next font (=> minimize FOUT)
    getFontLinks(),
    // preloads PDS component core chunk from CDN for PDS component hydration (=> improve loading performance)
    getComponentChunkLinks(),
    // preloads Porsche icons (=> minimize FOUC)
    getIconLinks(),
    // injects favicon, apple touch icons, android touch icons, etc.
    getMetaTagsAndIconLinks({ appTitle: 'Porsche' }),
  ].join('');

  return html.replace(/<\/head>/, `${headPartials}$&`);
};
```

### Step 5 (recommended)

Setting up [Tailwind CSS](https://tailwindcss.com) with the Porsche Design System
[Tailwind CSS Theme](/tailwindcss/introduction) allows you to use a utility-first CSS framework that guarantees
**seamless styling consistency** with Porsche's design principles.

#### The Key Advantage: Universal Code Sharing & Scalability

> Using Tailwind CSS with the Porsche Design System Theme provides a powerful benefit: **Your styles are truly
> framework-agnostic**. Since Tailwind generates atomic **utility classes**, you eliminate cascading style issues,
> promoting long-term **scalability and maintainability** for large projects. The patterns and components you build are
> easily portable. You can **copy and paste** the same styling code between projects, teams, and different technology
> stacks (React, Angular, Vue, plain HTML, etc.), ensuring **100% visual uniformity** across the organization. You can
> now use and customize the provided [Patterns](/patterns) and [Templates](/templates), which are all written in
> Tailwind CSS, to build applications quickly and efficiently.

Install Tailwind CSS within your project directory.

```bash
npm install tailwindcss @tailwindcss/postcss postcss
```

Create a `.postcssrc.json` file in your project root directory.

```json
// .postcssrc.json

{
  "plugins": {
    "@tailwindcss/postcss": {}
  }
}
```

Import Tailwind CSS and the Porsche Design System Tailwind CSS Theme.

```diff
/* src/styles.css */
@import '@porsche-design-system/components-angular/index.css';

+ @import 'tailwindcss';
+ @import '@porsche-design-system/components-angular/tailwindcss';
```

### Step 6

Add a Porsche Design System component (e.g., `<p-wordmark></p-wordmark>`) with some Tailwind CSS styles. Then, run
`npm run start` and verify that the component and styles display correctly.

```javascript
// src/app/app.html

<div class="grid justify-items-center gap-fluid-md m-static-lg p-fluid-lg bg-surface rounded-lg">
  <p-wordmark></p-wordmark>
  <h1 class="prose-display-md">Porsche Design System</h1>
</div>
<div class="…">…</div>
```
