import { ComponentStatus } from '@/components/components/ComponentStatus';
import { TableOfContents } from '@/components/common/TableOfContents';

export const metadata = {
  title: 'Select: Accessibility - Porsche Design System',
  description: 'Accessibility information and best practices for the Select component',
};

# Select <ComponentStatus tagName="p-select"></ComponentStatus>

<TableOfContents headings={['Accessibility support','Development considerations','Limitations','Tests']} />

## Accessibility support

### Keyboard

#### Combobox

| Key / state                     | Function                                                                                                                                 |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| `Down Arrow` `Up Arrow` `Space` | - Opens the listbox if it's not already displayed without moving focus or changing selection.<br /> - DOM focus remains on the combobox. |
| `Space`                         | Closes the listbox if it's dispalyed.                                                                                                    |

#### Listbox

| Key / state             | Function                                        |
| ----------------------- | ----------------------------------------------- |
| `Down Arrow` `Up Arrow` | Moves visual focus to the next/previous option. |
| `Home` `End`            | Moves visual focus to the first/last option.    |
| `ESC`                   | Closes listbox                                  |
| `Enter`, `Space`        | Selects an option                               |

### ARIA enhancements

#### Internal **ARIA** that is managed by the component:

| ARIA                            | Usage                                                                                        |
| ------------------------------- | -------------------------------------------------------------------------------------------- |
| `aria-labelledby="IDREF"`       | References the accessible name of the combobox.                                              |
| `aria-describedby="IDREF"`      | References the accessible description and status messages of the combobox.                   |
| `aria-label="STRING"`           | References the accessible name of the listbox.                                               |
| `role="status"`, `role="alert"` | When `message` and `state` prop change, the status message is announced.                     |
| `aria-expanded="BOOLEAN"`       | Indicates that the listbox element is displayed/hidden.                                      |
| `aria-controls="IDREF"`         | Identifies the element that serves as the listbox.                                           |
| `aria-hidden="true"`            | If `required` attribute is set, the visible indicator is hidden from assistive technologies. |
| `aria-haspopup="listbox"`       | Indicates that the combobox will open a listbox.                                             |
| `aria-required="true"`          | Indicates if the element is required.                                                        |

## Development considerations

### Disabled state

In general, you should prevent using the `disabled` state. Disabled elements are not reachable (focusable) anymore and
can be missed by screen reader users. They can be confusing for sighted users as well by not pointing out why these
elements are disabled.

## Tests

### Automated

| Technology                            | Support |
| ------------------------------------- | ------- |
| AXE-Core (WCAG 2.2 AA, Best-Practice) | ✅      |
| High-Contrast Mode (light/dark)       | ✅      |
| Text-Zoom (200%)                      | ✅      |

### Manual

| Technology                      | Support                                                                                                                |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| Keyboard                        | ✅                                                                                                                     |
| Screen reader (VoiceOver, NVDA) | ✅ (Note: Though Safari supports `ariaActiveDescendantElement` the active `option` doesn't get announced in VoiceOver) |
