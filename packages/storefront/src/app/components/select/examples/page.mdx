import { ComponentStatus } from '@/components/components/ComponentStatus';
import { TableOfContents } from '@/components/common/TableOfContents';
import { Configurator } from '@/components/playground/Configurator';
import { selectStoryOptgroups, selectStorySlottedImages } from '@/app/components/select/select.stories';
import { ComponentExample } from '@/components/playground/ComponentExample';
import { selectExampleForm, selectExampleDynamic, selectExampleRequired } from '@porsche-design-system/shared/examples';
import { ComponentStory } from '@/components/playground/ComponentStory';
import { Notification } from '@/components/common/Notification';

export const metadata = {
  title: 'Select - Porsche Design System',
  description: 'Discover detailed examples and insights of the Select component.',
};

# Select <ComponentStatus tagName="p-select"></ComponentStatus>

<TableOfContents
  headings={[
    'Basic example without preselection',
    'Slotted images',
    'Form',
    'Controlled',
    'Set Value',
    'With optgroups',
  ]}
/>

## Form

The `p-select` can be integrated into a form in two ways: **controlled** or **uncontrolled**, depending on your needs.

In the **controlled** approach, the select state is externally managed using the `value` property and `change` event to
keep it in sync with your application logic. This approach is ideal for complex forms or when using a form library. Note
that the component will still always update its internal value automatically when interacted with.

In the **uncontrolled** approach, the select behaves similar to a native `<select>`, automatically managing its own
state and including its value in form submissions through the
[ElementInternals](https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals) API. This is convenient for
smaller forms or simple submissions.

<Notification heading="Attention" heading-tag="h2" state="warning">
  <code>p-select</code> does not use a native select internally. As a result, it lacks access to native{' '}
  <code>ValidityState</code>
  properties and <code>validationMessage</code>, and it cannot display the native validation popover. This means
  validation behavior and error display will need to be implemented separately if required.
</Notification>

For more details on form integration, refer to the `Form` section in the
[developing documentation](/developing/introduction) for your framework of choice, or find a full form integration
example in our [examples repository](https://github.com/porsche-design-system/examples/tree/main/frameworks).

<ComponentExample codeSample={selectExampleForm} />

## Basic example without preselection

To ensure the user makes a conscious choice, use the initial value `undefined` of the `value` property. If you want to
give the user the choice to deselect the current option, you can provide an option without a value
`<p-select-option></p-select-option>`. If you don't want the user to be able to deselect the current option, but still
want to show a placeholder text you can set the option `disabled` like this
`<p-select-option disabled>Please choose an option</p-select-option>`.

<ComponentExample codeSample={selectExampleRequired} />

## Slotted images

In order to show an icon for each option, you can optionally slot an `img` tag within the `p-select-option`. Be aware
that the `p-select-option` can only contain a `#text` and an `img` node.

<ComponentStory story={selectStorySlottedImages} />

---

## Set Value

The `p-select` component behaves like regular form elements. It updates its value automatically based on user choices,
but can also be changed manually by using the value property. This property takes a string that represent the selected
option value.

<ComponentExample codeSample={selectExampleDynamic} />

---

## With optgroups

<ComponentStory story={selectStoryOptgroups} />
