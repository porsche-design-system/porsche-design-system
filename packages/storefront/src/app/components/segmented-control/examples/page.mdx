import { ComponentStatus } from '@/components/components/ComponentStatus';
import { TableOfContents } from '@/components/common/TableOfContents';
import { Configurator } from '@/components/playground/Configurator';
import {
  segmentedControlStoryLabel,
  segmentedControlStorySlots,
} from '@/app/components/segmented-control/segmented-control.stories';
import { ComponentStory } from '@/components/playground/ComponentStory';
import { ComponentExample } from '@/components/playground/ComponentExample';
import { segmentedControlExampleForm } from '@porsche-design-system/shared/examples';
import { Notification } from '@/components/common/Notification';

export const metadata = {
  title: 'Segmented Control - Porsche Design System',
  description: 'Discover detailed examples and insights of the Segmented Control component.',
};

# Segmented Control <ComponentStatus tagName="p-segmented-control"></ComponentStatus>

<TableOfContents headings={['Form', 'With Labels', 'Slots']} />

## Form

The `p-segmented-control` can be integrated into a form in two ways: **controlled** or **uncontrolled**, depending on
your needs.

In the **controlled** approach, the `p-segmented-control` state is externally managed using the `value` property and
`change` event to keep it in sync with your application logic. This approach is ideal for complex forms or when using a
form library. Note that the component will still always update its internal value automatically when interacted with.

In the **uncontrolled** approach, the `p-segmented-control` automatically managing its own state and including its value
in form submissions through the [ElementInternals](https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals)
API. This is convenient for smaller forms or simple submissions.

<Notification heading="Attention" heading-tag="h2" state="warning">
  The <code>p-segmented-control</code> lacks access to native <code>ValidityState</code>
  properties and <code>validationMessage</code>, and it cannot display the native validation popover. This means
  validation behavior and error display will need to be implemented separately if required.
</Notification>

For more details on form integration, refer to the `Form` section in the
[developing documentation](/developing/introduction) for your framework of choice, or find a full form integration
example in our [examples repository](https://github.com/porsche-design-system/examples/tree/v3/frameworks).

<ComponentExample codeSample={segmentedControlExampleForm} />

## With Labels

Additional meta information can be displayed by setting a `label` on each child.

<ComponentStory story={segmentedControlStoryLabel} />

## Slots

Sometimes it's useful to render custom markup for `label`, `description` or `message`. Therefore, named slots can be
used. Make sure **not** to define the corresponding property on the host element when a named slot is used (because a
property definition is preferred over a named slot). For named slots only
[phrasing content](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content) is
allowed.

In addition to the named slots `label`, `description` and `message`, there is also a `label-after` slot available. This
slot must be used to render content after the label which is not directly part of it (e.g. an external link or a
`popover` component).

<Notification heading="Attention" heading-tag="h3" state="warning">
  If the <code>p-segmented-control</code> is in <code>disabled/loading</code> state
  <strong>and</strong> <code>label</code> or <code>label-after</code> slots are used with focusable UI elements (e.g.
  <code>a</code> or <code>p-popover</code>), the keyboard focus handling has to be managed manually to prevent focusing
  disabled elements (e.g. add <code>tabindex="-1"</code> on those UI elements).
</Notification>

<ComponentStory story={segmentedControlStorySlots} />
