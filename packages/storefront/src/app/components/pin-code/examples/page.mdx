import { ComponentStatus } from '@/components/components/ComponentStatus';
import { TableOfContents } from '@/components/common/TableOfContents';
import { Notification } from '@/components/common/Notification';
import { ComponentExample } from '@/components/playground/ComponentExample';
import { pinCodeExampleForm } from '@porsche-design-system/shared/examples';
import { ComponentStory } from '@/components/playground/ComponentStory';
import { pinCodeStory } from '@/app/components/pin-code/pin-code.stories';

export const metadata = {
  title: 'Pin Code - Porsche Design System',
  description: 'Discover detailed examples and insights of the Pin Code component.',
};

# Pin Code <ComponentStatus tagName="p-pin-code"></ComponentStatus>

<TableOfContents headings={['Form', 'Controlled', 'Copy+Paste and autocomplete']} />

## Form

The `p-pin-code` can be integrated into a form in two ways: **controlled** or **uncontrolled**, depending on your needs.

In the **controlled** approach, the input state is externally managed using the `value` property and `change` event to
keep it in sync with your application logic. This approach is ideal for complex forms or when using a form library. Note
that the component will still always update its internal value automatically when interacted with.

In the **uncontrolled** approach, the input behaves similar to a single native `<input type="text" />`, automatically
managing its own state and including its value in form submissions through the
[ElementInternals](https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals) API.

<Notification heading="Attention" heading-tag="h2" state="warning">
  <code>p-pin-code</code> does not use a single native input internally. As a result, it lacks access to native{' '}
  <code>ValidityState</code>
  properties and <code>validationMessage</code>, and it cannot display the native validation popover. This means
  validation behavior and error display will need to be implemented separately if required.
</Notification>

For more details on form integration, refer to the `Form` section in the
[developing documentation](/developing/introduction) for your framework of choice, or find a full form integration
example in our [examples repository](https://github.com/porsche-design-system/examples/tree/main/frameworks).

<ComponentExample codeSample={pinCodeExampleForm} />

## Copy+Paste and autocomplete

By default, only one input can be changed at a time. The `p-pin-code` component also supports copying and pasting a
value and OTP auto-suggestion on mobile.

The `p-pin-code` component performs basic validation of the pasted value:

- If the pasted string is too long the `p-pin-code` attempts to fill in the other inputs.
- If the pasted value contains whitespaces, these will be removed.
- If the value contains other characters than digits, the value can not be pasted.

Try copy+paste `1234` into any of the inputs in the example below.

<ComponentStory story={pinCodeStory} />
