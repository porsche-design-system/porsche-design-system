import { ComponentStatus } from '@/components/components/ComponentStatus';
import { TableOfContents } from '@/components/common/TableOfContents';
import { inputTextStorySlots } from '@/app/components/input-text/input-text.stories';
import { ComponentStory } from '@/components/playground/ComponentStory';
import { ComponentExample } from '@/components/playground/ComponentExample';
import { inputTextExampleForm, inputTextExampleControlled } from '@porsche-design-system/shared/examples';
import { Notification } from '@/components/common/Notification';

export const metadata = {
  title: 'Input Text - Porsche Design System',
  description: 'Discover detailed examples and insights of the Input Text component.',
};

# Input Text <ComponentStatus tagName="p-input-text"></ComponentStatus>

<TableOfContents headings={['Form', 'Controlled Input (Preventing User Input)', 'Slots']} />

## Form

The `p-input-text` can be integrated into a form in two ways: **controlled** or **uncontrolled**, depending on your
needs.

In the **controlled** approach, the input state is externally managed using the `value` property and `input` event to
keep it in sync with your application logic. This approach is ideal for complex forms or when using a form library. Note
that the component will still always update its internal value automatically when interacted with.

In the **uncontrolled** approach, the input behaves similar to a native `<input type="text" />`, automatically managing
its own state and including its value in form submissions through the
[ElementInternals](https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals) API. This is convenient for
smaller forms or simple submissions.

For more details on form integration, refer to the `Form` section in the
[developing documentation](/developing/introduction) for your framework of choice, or find a full form integration
example in our [examples repository](https://github.com/porsche-design-system/examples/tree/v3/frameworks).

<ComponentExample codeSample={inputTextExampleForm} />

## Controlled Input (Preventing User Input)

In some cases you may want to fully control the input value (for example to limit or validate user input). In frameworks
like React, native `<input />` elements behave as controlled components when a `value` is provided. The browser does not
update the displayed value directly, it only changes when the framework state changes.

Our `p-input-*` components currently do not block user-driven updates of the underlying native `<input>`. Therefore,
when using them in a controlled setup, you must manually overwrite the hostâ€™s value inside the `input` event handler to
keep it in sync with your state.

We are aware of this limitation and may improve the framework integration in the future. You can find a detailed
explanation here: [#4202](https://github.com/porsche-design-system/porsche-design-system/issues/4202)

<Notification heading="Attention" heading-tag="h3" state="warning">
  We strongly discourage preventing user input. This can feel broken and lead to confusion or frustration. Instead,
  validate on `input` and provide clear feedback. Use the `state` and `message` props to explain what is allowed and why
  a value is invalid.
</Notification>

<ComponentExample codeSample={inputTextExampleControlled} />

## Slots

Sometimes it's useful to be able to render markup (e.g. an anchor tag) for `label`, `description` or `message`.
Therefore, a named slot can be used. Make sure **not** to define the corresponding property on the host element when a
named slot is used (because a property definition is preferred over a named slot). For named slots only
[phrasing content](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content) is
allowed.

In addition to the named slots `label`, `description` and `message`, there is also a `label-after` slot available. This
slot must be used to render content after the label which is not directly part of it (e.g. an external link or a
`popover` component).

If you need to provide additional information or actions to the user, you can use the `start` and `end` slots. For
example, you might include an icon, a unit, or an action button. Icons and text should use the `contrast-medium` color
to avoid being mistaken for a button.

If you use a `p-button-pure` or a `p-link-pure`, a `padding` and `margin` have to be set with the exposed
`--ref-p-input-slotted-padding` and `--ref-p-input-slotted-margin` CSS Variables.

<Notification heading="Attention" heading-tag="h3" state="warning">
  If the <code>component</code> is in <code>disabled/loading</code> state
  <strong>and</strong> <code>label</code> or <code>label-after</code> slots are used with focusable UI elements (e.g.
  <code>a</code> or <code>p-popover</code>), the keyboard focus handling has to be managed manually to prevent focusing
  disabled elements (e.g. add <code>tabindex="-1"</code> on those UI elements).
</Notification>

<ComponentStory story={inputTextStorySlots} />
